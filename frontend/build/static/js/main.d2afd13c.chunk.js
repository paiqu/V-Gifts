(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{224:function(e,t,a){},252:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),i=a.n(c),s=(a(224),a(10)),o=a(5),l=a(16),d=a(19),j=a(78),u=a(310),m=a(9),h=a.n(m),b=a(165),p=a.n(b);a(242).config();var x="An error occured. Try again later",O=a(166);h.a.defaults.baseURL="http://vgifts.pythonanywhere.com/",h.a.defaults.headers.put["Content-Type"]="application/json",h.a.defaults.headers.post["Content-Type"]="application/json",h.a.defaults.headers.delete["Content-Type"]="application/json",h.a.interceptors.request.use((function(e){return e}));h.a.interceptors.response.use((function(e){return e}),(function(e){console.error(e);var t=x;return e.response?(console.log(e.response.data),t=p.a.get(e,"response.data.message")||x,e.response):(O.a.error(t),Promise.reject(Object(s.a)({},e)))}));var g=r.a.createContext(),f=g.Provider,v=(g.Consumer,g),y=a(47),w=a(30),C=a(320),N=a(319),k=a(313),_=a(257),S=a(318),T=a(62),I=a(258),A=a(261),P=a(321),D=a(345),E=a(340),R=a(113),B=a.n(R),W=a(112),L=a.n(W),H=a(66),q=a(1);function F(e){var t=e.users.map((function(e){return{id:e.user_id,account_name:e.account_name,first_name:e.first_name,last_name:e.last_name,email:e.email,address:e.address,city:e.city,country:e.country}}));return Object(q.jsxs)("div",{style:{height:400,width:"100%"},children:[Object(q.jsx)(T.a,{variant:"h3",children:"Users in system"}),Object(q.jsx)(H.a,{rows:t,columns:[{field:"id",headerName:"ID",width:100},{field:"account_name",headerName:"Account name",width:180},{field:"first_name",headerName:"First name",width:180},{field:"last_name",headerName:"Last name",width:180},{field:"fullName",headerName:"Full name",description:"This column has a value getter and is not sortable.",sortable:!1,width:160,valueGetter:function(e){return"".concat(e.getValue("first_name")||""," ").concat(e.getValue("last_name")||"")}},{field:"email",headerName:"Email",width:180},{field:"address",headerName:"Address",width:250},{field:"city",headerName:"City",width:180},{field:"country",headerName:"Country",width:180}],pageSize:5,checkboxSelection:!0})]})}var M=a(115),G=a.n(M),z=a(314),U=a(315),V=a(316),Y=a(80),$=a.n(Y),J=a(79),Z=a.n(J),K=Object(y.a)((function(e){return{root:{},gridItem:{height:e.spacing(65)},cardTitle:{display:"flex",marginBottom:e.spacing(1)},cardIcon:{width:e.spacing(8),height:e.spacing(8),marginRight:e.spacing(.5)},cardTitleText:{textDecoration:"none",fontWeight:"200",color:e.palette.primary.contrastText},cardContent:{display:"flex",flexDirection:"column",alignItems:"start"}}}));var Q=function(e){var t=K(),a=Object(w.a)();return Object(q.jsx)("div",{classeName:t.root,children:Object(q.jsxs)(z.a,{container:!0,spacing:3,children:[Object(q.jsx)(z.a,{item:!0,md:3,xs:12,children:Object(q.jsx)(U.a,{className:t.gridItem,variant:"outlined",children:Object(q.jsxs)(V.a,{className:t.cardContent,children:[Object(q.jsxs)("div",{className:t.cardTitle,children:[Object(q.jsx)(L.a,{className:t.cardIcon}),Object(q.jsx)(T.a,{variant:"h3",classname:t.cardTitleText,children:"Market"})]}),Object(q.jsxs)(T.a,{variant:"h5",color:a.palette.primary.contrastText,component:"p",children:[e.productsNum," products in total"]})]})})}),Object(q.jsx)(z.a,{item:!0,md:3,xs:12,children:Object(q.jsx)(U.a,{className:t.gridItem,variant:"outlined",children:Object(q.jsxs)(V.a,{className:t.cardContent,children:[Object(q.jsxs)("div",{className:t.cardTitle,children:[Object(q.jsx)(Z.a,{className:t.cardIcon}),Object(q.jsx)(T.a,{variant:"h3",classname:t.cardTitleText,children:"Users"})]}),Object(q.jsxs)(T.a,{variant:"h5",color:a.palette.primary.contrastText,component:"p",children:[e.usersNum," users registered"]})]})})}),Object(q.jsx)(z.a,{item:!0,md:3,xs:12,children:Object(q.jsx)(U.a,{className:t.gridItem,variant:"outlined",children:Object(q.jsxs)(V.a,{className:t.cardContent,children:[Object(q.jsxs)("div",{className:t.cardTitle,children:[Object(q.jsx)(B.a,{className:t.cardIcon}),Object(q.jsx)(T.a,{variant:"h3",classname:t.cardTitleText,children:"Orders"})]}),Object(q.jsxs)(T.a,{variant:"h5",color:a.palette.primary.contrastText,component:"p",children:[e.ordersNum," orders in total"]})]})})}),Object(q.jsx)(z.a,{item:!0,md:3,xs:12,children:Object(q.jsx)(U.a,{className:t.gridItem,variant:"outlined",children:Object(q.jsxs)(V.a,{className:t.cardContent,children:[Object(q.jsxs)("div",{className:t.cardTitle,children:[Object(q.jsx)($.a,{className:t.cardIcon}),Object(q.jsx)(T.a,{variant:"h3",classname:t.cardTitleText,children:"Admins"})]}),Object(q.jsxs)(T.a,{variant:"h5",color:a.palette.primary.contrastText,component:"p",children:[e.adminsNum," Admins in total"]})]})})})]})})},X=a(71),ee=a(322),te=a(28),ae=a(200),ne=a(135),re=a.n(ne),ce=a(136),ie=a.n(ce),se=a(347),oe=a(342);function le(e){return Object(q.jsx)(oe.a,Object(s.a)({elevation:6,variant:"filled"},e))}var de=Object(y.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function je(e){var t=de(),a=function(t,a){"clickaway"!==a&&e.setOpen(!1)};return Object(q.jsx)("div",{className:t.root,children:Object(q.jsx)(se.a,{open:e.open,autoHideDuration:5e3,onClose:a,children:Object(q.jsx)(le,{onClose:a,severity:e.severity,children:e.message})})})}var ue={severity:"error",message:"Sorry, you don't have enough fund in your account"},me={severity:"warning",message:"Sorry, you cart is empty"},he={severity:"success",message:"Thanks for your purchase!"},be={severity:"error",message:"Sorry, the entered number has to be positive"},pe={severity:"success",message:"Product info has been updated"},xe={severity:"success",message:"The new product has been added"},Oe={severity:"success",message:"The order state has been update"},ge={severity:"success",message:"The order state has been change to receive"},fe={severity:"success",message:"The order state has been change to refund"},ve={severity:"success",message:"The password has been change"},ye={severity:"error",message:"Sorry, your Image cannot be empty"},we={severity:"error",message:"The order ID is invalid"},Ce=Object(y.a)((function(e){return{form:{marginTop:"2rem"}}}));function Ne(e){var t=Ce(),a=e.token,r=Object(n.useState)([]),c=Object(o.a)(r,2),i=c[0],l=c[1],d=Object(n.useState)(!1),j=Object(o.a)(d,2),u=j[0],m=j[1],b=Object(n.useState)(null),p=Object(o.a)(b,2),x=p[0],O=p[1],g=Object(n.useState)({name:"",price:0,description:"",delivery:0,img:null}),f=Object(o.a)(g,2),v=f[0],y=f[1],w=Object(n.useState)({id:0,name:"",price:0,description:"",delivery:0,img:null}),C=Object(o.a)(w,2),N=C[0],k=C[1],_=Object(n.useState)([]),S=Object(o.a)(_,2),I=S[0],A=S[1],P=Object(n.useState)(!1),D=Object(o.a)(P,2),E=D[0],R=D[1],B=Object(n.useState)({severity:"",message:""}),W=Object(o.a)(B,2),L=W[0],F=W[1],M=i.map((function(e){return{id:e.product_id,name:e.name,price:"$".concat(e.price),rating:"".concat(e.rating,"/5")}})),G=function(e){return function(t){y(Object(s.a)(Object(s.a)({},v),{},Object(te.a)({},e,t.target.value)))}},U=function(e){return function(t){k(Object(s.a)(Object(s.a)({},N),{},Object(te.a)({},e,t.target.value)))}},V=function(e){y(Object(s.a)(Object(s.a)({},v),{},{img:e.target.files[0]}))},Y=function(e){console.log(e.target.files[0]),k(Object(s.a)(Object(s.a)({},N),{},{img:e.target.files[0]})),console.log(e.target.files[0].type.replace(/(.*)\//g,""))};Object(n.useEffect)((function(){h.a.get("/product/get_all",{params:{token:"",page:-1}}).then((function(e){var t=e.data.product_lst;m(!1),l(t)})).catch((function(e){}))}),[u]),Object(n.useEffect)((function(){0!==I.length&&h.a.get("/product/get_info",{params:{id:parseInt(I)}}).then((function(e){var t=e.data;k({id:t.id,name:t.name,price:t.price,description:t.description,delivery:t.delivery})})).catch((function(e){}))}),[I]);return Object(q.jsxs)("div",{style:{width:"100%"},children:[Object(q.jsx)(T.a,{variant:"h5",children:"Products in the system"}),Object(q.jsx)(H.a,{rows:M,columns:[{field:"id",headerName:"Product ID",width:150},{field:"name",headerName:"Product Name",width:350},{field:"price",headerName:"Price",width:180},{field:"rating",headerName:"Rating",width:250}],pageSize:5,autoHeight:!0,selectionModel:I,hideFooterSelectedRowCount:!0,onSelectionModelChange:function(e){var t=e.selectionModel;if(t.length>1){var a=new Set(I),n=t.filter((function(e){return!a.has(e)}));A(n)}else A(t)}}),Object(q.jsxs)(z.a,{container:!0,children:[Object(q.jsx)(z.a,{container:!0,item:!0,xs:6,children:Object(q.jsx)("form",{className:t.form,onSubmit:function(t){if(t.preventDefault(),v.price<0)return F(be),void R(!0);if(null===v.img)return F(ye),void R(!0);var n=new FormData;n.append("token",a),n.append("file",v.img),n.append("name",v.name),n.append("delivery",v.delivery),n.append("description",v.description),n.append("price",v.price),h.a.post("/product/new",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){var a=t.data;e.setUpdateProduct(!0),F(xe),R(!0),console.log(a),m(!0)})).catch((function(e){}))},children:Object(q.jsxs)(z.a,{container:!0,spacing:2,xs:12,children:[Object(q.jsx)(z.a,{item:!0,xs:12,children:Object(q.jsx)(T.a,{variant:"h5",style:{marginBottom:"1rem"},children:"Add a New Product"})}),Object(q.jsxs)(z.a,{container:!0,item:!0,xs:12,spacing:2,children:[Object(q.jsx)(z.a,{item:!0,xs:5,children:Object(q.jsx)(ae.a,{required:!0,id:"product-name",label:"Product Name",placeholder:"Product Name",variant:"outlined",onChange:G("name"),InputLabelProps:{shrink:!0},style:{marginRight:"1rem",width:"100%"}})}),Object(q.jsx)(z.a,{item:!0,xs:2,children:Object(q.jsx)(ae.a,{required:!0,id:"product-price",label:"Price",placeholder:"Product Price",type:"number",variant:"outlined",onChange:G("price"),inputProps:{step:1,min:0},value:v.price,style:{width:"100%"}})}),Object(q.jsx)(z.a,{item:!0,xs:3,children:Object(q.jsx)(ae.a,{required:!0,id:"product-delivery",label:"Delivery Days",placeholder:"Delivery Days",type:"number",variant:"outlined",onChange:G("delivery"),inputProps:{step:1,min:0},value:v.delivery,style:{width:"100%"}})})]}),Object(q.jsx)(z.a,{container:!0,item:!0,xs:12,spacing:2,children:Object(q.jsx)(z.a,{item:!0,xs:10,children:Object(q.jsx)(ae.a,{required:!0,id:"product-description",label:"Description",placeholder:"Product Description",variant:"outlined",onChange:G("description"),style:{marginRight:"1rem",width:"100%"},multiline:!0,rows:4,rowsMax:4})})}),Object(q.jsxs)(z.a,{container:!0,item:!0,xs:12,spacing:2,children:[Object(q.jsxs)(z.a,{item:!0,xs:5,children:[null==v.img&&Object(q.jsxs)(X.a,{variant:"contained",component:"label",color:"primary",style:{width:"100%"},children:[Object(q.jsx)(re.a,{}),"Upload Image",Object(q.jsx)("input",{type:"file",accept:"image/*",hidden:!0,onChange:V})]}),null!=v.img&&Object(q.jsxs)(X.a,{variant:"contained",component:"label",color:"primary",style:{width:"100%"},children:[Object(q.jsx)(ie.a,{}),"Image Uploaded",Object(q.jsx)("input",{type:"file",accept:"image/*",hidden:!0,onChange:V})]})]}),Object(q.jsx)(z.a,{item:!0,xs:5,children:Object(q.jsx)(X.a,{type:"submit",variant:"contained",color:"secondary",style:{width:"100%"},children:"Add New Product"})})]})]})})}),Object(q.jsx)(z.a,{container:!0,item:!0,xs:6,children:Object(q.jsx)("form",{className:t.form,onSubmit:function(e){if(e.preventDefault(),N.price<0)return F(be),void R(!0);var t=new FormData;t.append("token",a),t.append("file",N.img),t.append("id",N.id),t.append("name",N.name),t.append("delivery",N.delivery),t.append("description",N.description),t.append("price",N.price),console.log(t),h.a.post("/product/edit",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var t=e.data;F(pe),R(!0),console.log(t),m(!0)})).catch((function(e){}))},children:Object(q.jsxs)(z.a,{container:!0,spacing:2,children:[Object(q.jsx)(z.a,{item:!0,xs:12,children:Object(q.jsxs)(T.a,{variant:"h5",style:{marginBottom:"1rem"},children:["Edit an Existed Product (Current Selected: id-",I,")"]})}),Object(q.jsxs)(z.a,{container:!0,item:!0,xs:12,spacing:2,children:[Object(q.jsx)(z.a,{item:!0,xs:5,children:Object(q.jsx)(ae.a,{required:!0,id:"product-name",label:"Name",placeholder:"Product Name",variant:"outlined",onChange:U("name"),InputLabelProps:{shrink:!0},style:{marginRight:"1rem",width:"100%"},value:N.name})}),Object(q.jsx)(z.a,{item:!0,xs:2,children:Object(q.jsx)(ae.a,{required:!0,id:"product-price",label:"Price",type:"number",variant:"outlined",onChange:U("price"),inputProps:{step:1,min:0},style:{width:"100%"},value:N.price})}),Object(q.jsx)(z.a,{item:!0,xs:3,children:Object(q.jsx)(ae.a,{required:!0,id:"selected-product-delivery",label:"Delivery Days",type:"number",variant:"outlined",onChange:U("delivery"),inputProps:{step:1,min:0},value:N.delivery,InputLabelProps:{shrink:!0},style:{width:"100%"}})})]}),Object(q.jsx)(z.a,{container:!0,item:!0,xs:12,spacing:2,children:Object(q.jsx)(z.a,{item:!0,xs:10,children:Object(q.jsx)(ae.a,{required:!0,id:"product-description",label:"Description",variant:"outlined",onChange:U("description"),style:{marginRight:"1rem",width:"100%"},multiline:!0,rows:4,rowsMax:4,value:N.description})})}),Object(q.jsxs)(z.a,{container:!0,item:!0,xs:12,spacing:2,children:[Object(q.jsxs)(z.a,{item:!0,xs:5,children:[null==N.img&&Object(q.jsxs)(X.a,{variant:"contained",component:"label",color:"primary",style:{width:"100%"},children:[Object(q.jsx)(re.a,{}),"Upload New Image",Object(q.jsx)("input",{type:"file",accept:"image/*",hidden:!0,onChange:Y})]}),null!=N.img&&Object(q.jsxs)(X.a,{variant:"contained",component:"label",color:"primary",style:{width:"100%"},children:[Object(q.jsx)(ie.a,{}),"Image Uploaded",Object(q.jsx)("input",{type:"file",accept:"image/*",hidden:!0,onChange:Y})]})]}),Object(q.jsx)(z.a,{item:!0,xs:5,children:Object(q.jsx)(X.a,{type:"submit",variant:"contained",color:"secondary",style:{width:"100%"},children:"Confirm Edit"})})]})]})})}),Object(q.jsx)(z.a,{item:!0,xs:10,children:Object(q.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n=new FormData;n.append("token",a),n.append("file",x),h.a.post("/product/import_csv",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){200===t.status&&(F({severity:"Success",message:t.data.status}),e.setUpdateProduct(!0),R(!0),m(!0))})).catch((function(e){}))},children:[Object(q.jsx)(T.a,{variant:"h5",style:{marginBottom:"1rem",marginTop:"20px"},children:"Import CSV File"}),Object(q.jsx)(z.a,{item:!0,xs:4,children:Object(q.jsxs)(X.a,{variant:"contained",component:"label",color:"primary",style:{width:"100%"},children:[null==x?"Upload a CSV file":"CSV Uploaded",Object(q.jsx)("input",{type:"file",accept:".csv",hidden:!0,onChange:function(e){console.log(e.target.files[0]),O(e.target.files[0])}})]})}),Object(q.jsx)(z.a,{item:!0,xs:4,children:Object(q.jsx)(X.a,{type:"submit",variant:"contained",color:"secondary",style:{width:"100%",marginTop:"20px"},children:"Submit"})})]})})]}),E&&Object(q.jsx)(je,{severity:L.severity,message:L.message,open:E,setOpen:R})]})}var ke=a(114),_e=a.n(ke),Se=466,Te=a(147),Ie=a(70),Ae=a(94),Pe=a(145);function De(e){var t=Object(n.useState)(e.orders),a=Object(o.a)(t,2),r=a[0],c=a[1],i=e.token,l=Object(n.useState)({orderId:"",orderState:""}),d=Object(o.a)(l,2),j=d[0],u=d[1],m=Object(n.useState)(!1),b=Object(o.a)(m,2),p=b[0],x=b[1],O=Object(n.useState)({severity:"",message:""}),g=Object(o.a)(O,2),f=g[0],v=g[1],y=function(e){return function(t){u(Object(s.a)(Object(s.a)({},j),{},Object(te.a)({},e,t.target.value)))}},w=r.map((function(e){return{id:e.order_id,order_state:e.state_in_text,user_id:e.user_id,product_id:e.product_id,product_name:e.product_name,amount:e.amount,cost:e.cost,purchase_date:_e()(parseFloat(1e3*e.purchase_date)).format("YYYY-MM-DD HH:mm:ss")}}));return Object(q.jsxs)("div",{style:{width:"100%"},children:[Object(q.jsx)(T.a,{variant:"h5",children:"Orders in the system"}),Object(q.jsx)(H.a,{rows:w,columns:[{field:"id",headerName:"Order ID",width:120},{field:"order_state",headerName:"State",width:150},{field:"user_id",headerName:"User ID",width:100},{field:"product_id",headerName:"Product ID",width:150},{field:"product_name",headerName:"Product Name",width:250},{field:"amount",headerName:"Amount",width:100},{field:"cost",headerName:"Cost",width:100},{field:"purchase_date",headerName:"Purchase Date",width:150}],pageSize:7,autoHeight:!0}),Object(q.jsx)("form",{onSubmit:function(e){e.preventDefault(),h.a.post("/order/statechange",{token:i,id:j.orderId,state:j.orderState}).then((function(e){200===e.status?(console.log(e),v(Oe),x(!0),h.a.get("/admin/all_order",{params:{token:i}}).then((function(e){var t=e.data;c(t)}))):467===e.status&&(v(we),x(!0))}))},children:Object(q.jsxs)(z.a,{container:!0,spacing:2,xs:12,children:[Object(q.jsx)(z.a,{item:!0,xs:12,children:Object(q.jsx)(T.a,{variant:"h5",style:{marginBottom:"1rem",marginTop:"20px"},children:"Update Order State"})}),Object(q.jsx)(z.a,{item:!0,xs:2,children:Object(q.jsx)(ae.a,{required:!0,label:"Order Id",placeholder:"Order Id",variant:"outlined",onChange:y("orderId"),InputLabelProps:{shrink:!0},style:{marginRight:"1rem",width:"100%"}})}),Object(q.jsx)(z.a,{item:!0,xs:3,children:Object(q.jsxs)(Ae.a,{variant:"outlined",style:{width:"100%"},children:[Object(q.jsx)(Te.a,{id:"demo-simple-select-label",children:"State Code"}),Object(q.jsxs)(Pe.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:j.orderState,onChange:y("orderState"),children:[Object(q.jsx)(Ie.a,{value:"0",children:"Just purchase"}),Object(q.jsx)(Ie.a,{value:"1",children:"Delivering"}),Object(q.jsx)(Ie.a,{value:"2",children:"Done"}),Object(q.jsx)(Ie.a,{value:"3",children:"Cancelled / Refunded"})]})]})}),Object(q.jsx)(z.a,{item:!0,xs:2,children:Object(q.jsx)(X.a,{type:"submit",variant:"contained",color:"secondary",style:{width:"100%",height:"50px"},children:"Update State"})})]})}),p&&Object(q.jsx)(je,{severity:f.severity,message:f.message,open:p,setOpen:x})]})}var Ee=a(81),Re=a.n(Ee),Be=a(82),We=a.n(Be),Le=a(317),He=a(76),qe=a(344),Fe=Object(y.a)((function(e){return{form:{marginTop:"2rem"}}}));function Me(e){var t=Fe(),a=e.token,r=Object(n.useState)([]),c=Object(o.a)(r,2),i=c[0],l=c[1],d=Object(n.useState)({name:"",password:"",email:"",showPassword:!0}),j=Object(o.a)(d,2),u=j[0],m=j[1],b=Object(n.useState)(!1),p=Object(o.a)(b,2),x=p[0],O=p[1],g=Object(n.useState)({nameError:!1,emailError:!1,passwordError:!1,help_text:""}),f=Object(o.a)(g,2),v=f[0],y=f[1],w=function(){return function(e){y({nameError:!1,emailError:!1,passwordError:!1,help_text:""})}},C=function(e){return function(t){m(Object(s.a)(Object(s.a)({},u),{},Object(te.a)({},e,t.target.value)))}};Object(n.useEffect)((function(){h.a.get("/admin/all_admin",{params:{token:a}}).then((function(e){var t=e.data;l(t)})).catch((function(e){}))}),[x,a]);var N=i.map((function(e){return{id:e.admin_id,username:e.username,email:e.email}}));return Object(q.jsxs)("div",{style:{width:"100%"},children:[Object(q.jsx)(T.a,{variant:"h5",children:"Admins in the system"}),Object(q.jsx)(H.a,{rows:N,columns:[{field:"id",headerName:"Admin ID",width:150},{field:"username",headerName:"Admin Name",width:180},{field:"email",headerName:"Admin Email",width:250}],pageSize:7,checkboxSelection:!0,autoHeight:!0}),Object(q.jsxs)("form",{className:t.form,onSubmit:function(e){e.preventDefault(),h.a.post("/admin/add_admin",{token:a,name:u.name,password:u.password,email:u.email}).then((function(e){var t=e.data;462===t.code?y(Object(s.a)(Object(s.a)({},v),{},{emailError:!0,help_text:"The entered email is invalid"})):464===t.code?y({nameError:!0,help_text:"The admin name is invalid"}):463===t.code?y({nameError:!0,help_text:"The admin name is already existed"}):468===t.code?y(Object(s.a)(Object(s.a)({},v),{},{emailError:!0,help_text:"The admin email is already existed"})):O(!0)})).catch((function(e){}))},children:[Object(q.jsx)(T.a,{variant:"h5",style:{marginBottom:"1rem"},children:"Add a New Admin"}),Object(q.jsxs)(E.a,{display:"flex",alignItems:"center",children:[Object(q.jsx)(ae.a,{required:!0,id:"admin-name",label:"Admin Name",placeholder:"Admin Name",variant:"outlined",error:v.nameError,helperText:v.help_text,onChange:C("name"),onClick:w(),style:{marginRight:"1rem"}}),Object(q.jsx)(ae.a,{required:!0,id:"admin-email",label:"Admin Email",placeholder:"Admin Email",variant:"outlined",error:v.emailError,helperText:v.help_text,onChange:C("email"),onClick:w(),style:{marginRight:"1rem"}}),Object(q.jsx)(qe.a,{id:"outlined-adornment-password",type:u.showPassword?"text":"password",value:u.password,label:"Admin Password",placeholder:"Admin Password",variant:"outlined",error:v.passwordError,helperText:v.help_text,onChange:C("password"),onClick:w(),endAdornment:Object(q.jsx)(Le.a,{position:"end",children:Object(q.jsx)(He.a,{"aria-label":"toggle password visibility",onClick:function(){m(Object(s.a)(Object(s.a)({},u),{},{showPassword:!u.showPassword}))},onMouseDown:function(e){e.preventDefault()},edge:"end",children:u.showPassword?Object(q.jsx)(Re.a,{}):Object(q.jsx)(We.a,{})})}),labelWidth:70}),Object(q.jsx)(X.a,{type:"submit",variant:"contained",color:"primary",style:{marginLeft:"1rem",height:"100%"},children:"Add"})]})]})]})}var Ge=Object(y.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,display:"flex"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerPaper:{width:240},drawerContainer:{overflow:"auto"},content:{flexGrow:1,padding:e.spacing(3)},logo:{margin:"auto",textAlign:"center",maxWidth:"auto",maxHeight:"7vh",marginRight:"0.5rem"},title:{flexGrow:1},logoutButton:{}}}));function ze(e){var t=Ge(),a=Object(w.a)(),c=r.a.useContext(v).admin,i=e.profile,s=Object(n.useState)({home:!0,products:!1,users:!1,orders:!1,admins:!1}),d=Object(o.a)(s,2),j=d[0],u=d[1],m=Object(n.useState)([]),b=Object(o.a)(m,2),p=b[0],x=b[1],O=Object(n.useState)(!1),g=Object(o.a)(O,2),f=g[0],y=g[1],R=Object(n.useState)([]),W=Object(o.a)(R,2),H=W[0],M=W[1],z=Object(n.useState)([]),U=Object(o.a)(z,2),V=U[0],Y=U[1],J=Object(n.useState)([]),K=Object(o.a)(J,2),te=K[0],ae=K[1];r.a.useEffect((function(){h.a.get("/product/get_all",{params:{token:"",page:-1}}).then((function(e){var t=e.data.product_lst;y(!1),x(t)})).catch((function(e){})),h.a.get("admin/all_user",{params:{token:c}}).then((function(e){var t=e.data;M(t)})).catch((function(e){})),h.a.get("/admin/all_order",{params:{token:c}}).then((function(e){var t=e.data;Y(t)})).catch((function(e){})),h.a.get("/admin/all_admin",{params:{token:c}}).then((function(e){var t=e.data;ae(t)})).catch((function(e){}))}),[c,f]);var ne=Object(q.jsx)(F,{token:c,users:H}),re=Object(q.jsx)(De,{token:c,orders:V}),ce=Object(q.jsx)(Q,{usersNum:H.length,ordersNum:V.length,adminsNum:te.length,productsNum:p.length,profile:i,token:c}),ie=Object(q.jsx)(Ne,{token:c,products:p,setUpdateProduct:y}),se=Object(q.jsx)(Me,{token:c,admins:te});return Object(q.jsxs)("div",{className:t.root,children:[Object(q.jsx)(S.a,{}),Object(q.jsx)(N.a,{position:"fixed",className:t.appBar,elevation:0,children:Object(q.jsxs)(k.a,{children:[Object(q.jsx)(T.a,{style:{textDecoration:"none",fontWeight:"200",color:a.palette.primary.contrastText},color:"inherit",component:l.b,to:"/",className:t.title,variant:"h4",noWrap:!0,children:"V-Gifts | Admin Page"}),Object(q.jsx)(X.a,{className:t.logoutButton,variant:"contained",color:"secondary",onClick:function(t){h.a.post("/admin/logout",{token:c}).then((function(t){console.log(t),localStorage.removeItem("admin_token"),localStorage.removeItem("admin_id"),e.history.push("/")})).catch((function(e){console.log(e)}))},children:"Log out"})]})}),Object(q.jsxs)(C.a,{className:t.drawer,variant:"permanent",classes:{paper:t.drawerPaper},children:[Object(q.jsx)(k.a,{}),Object(q.jsx)("div",{className:t.drawerContainer,children:Object(q.jsxs)(_.a,{children:[Object(q.jsxs)(I.a,{button:!0,onClick:function(){u({home:!0,products:!1,users:!1,orders:!1,admins:!1})},children:[Object(q.jsx)(A.a,{children:Object(q.jsx)(G.a,{})}),Object(q.jsx)(P.a,{primary:"Home"})]},"Home"),Object(q.jsxs)(I.a,{button:!0,onClick:function(){u({home:!1,products:!0,users:!1,orders:!1,admins:!1})},children:[Object(q.jsx)(A.a,{children:Object(q.jsx)(L.a,{})}),Object(q.jsx)(P.a,{primary:"Market"})]},"Market"),Object(q.jsxs)(I.a,{button:!0,onClick:function(){u({home:!1,products:!1,users:!0,orders:!1,admins:!1})},children:[Object(q.jsx)(A.a,{children:Object(q.jsx)(Z.a,{})}),Object(q.jsx)(P.a,{primary:"Users"})]},"Users"),Object(q.jsxs)(I.a,{button:!0,onClick:function(){u({home:!1,products:!1,users:!1,orders:!0,admins:!1})},children:[Object(q.jsx)(A.a,{children:Object(q.jsx)(B.a,{})}),Object(q.jsx)(P.a,{primary:"Orders"})]},"Orders"),Object(q.jsx)(ee.a,{}),Object(q.jsxs)(I.a,{button:!0,onClick:function(){u({home:!1,products:!1,users:!1,orders:!1,admins:!0})},children:[Object(q.jsx)(A.a,{children:Object(q.jsx)($.a,{})}),Object(q.jsx)(P.a,{primary:"Admins"})]},"Admins")]})})]}),Object(q.jsxs)("main",{className:t.content,children:[Object(q.jsx)(k.a,{}),Object(q.jsxs)(E.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[Object(q.jsx)(D.a,{alt:"Admin Avartar",src:"/img/admin/admin-1.png",variant:"rounded",style:{border:"1px solid ".concat(a.palette.primary.contrastText),width:a.spacing(20),height:a.spacing(20),marginBottom:a.spacing(5)}}),Object(q.jsx)(T.a,{variant:"h5",children:"Admin: ".concat(i.name,"(").concat(i.email,")")})]}),j.home&&ce,j.products&&ie,j.users&&ne,j.orders&&re,j.admins&&se]})]})}var Ue=Object(y.a)((function(e){return{}}));var Ve=function(e){Ue();var t=r.a.useContext(v).admin,a=Object(n.useState)({name:"",email:""}),c=Object(o.a)(a,2),i=c[0],s=c[1];return r.a.useEffect((function(){h.a.get("admin/profile",{params:{token:t}}).then((function(e){var t=e.data;s({name:t.username,email:t.email})})).catch((function(e){}))}),[t]),Object(q.jsx)("div",{children:Object(q.jsx)(ze,{history:e.history,profile:i})})},Ye=Object(y.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},loginButton:{marginRight:e.spacing(2)},registerButton:{},toolBar:{minHeight:"10vh"},logo:{margin:"auto",textAlign:"center",maxWidth:"auto",maxHeight:"7vh",marginRight:"0.5rem"}}}));function $e(){var e=Ye(),t=Object(w.a)();return Object(q.jsx)("div",{className:e.root,children:Object(q.jsx)(N.a,{position:"static",style:{boxShadow:"none",backgroundColor:t.palette.primary.main},children:Object(q.jsxs)(k.a,{className:e.toolBar,children:[Object(q.jsx)("img",{className:e.logo,src:"img/logo/logo-1.png",alt:"V-Gifts logo"}),Object(q.jsx)(T.a,{style:{textDecoration:"none",fontWeight:"200",color:t.palette.primary.contrastText},color:"inherit",component:l.b,to:"/",className:e.title,variant:"h4",noWrap:!0,children:"V-Gifts"}),Object(q.jsx)(X.a,{className:e.loginButton,color:"inherit",variant:"outlined",component:l.b,to:"/login",children:"Log in"}),Object(q.jsx)(X.a,{className:e.registerButton,color:"inherit",variant:"outlined",component:l.b,to:"/register",children:"Register"})]})})})}var Je=Object(y.a)((function(e){return{intro:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"90vh",width:"100%",boxShadow:"none"},joinButton:{marginRight:"1rem"}}}));var Ze=function(e){var t=Je(),a=Object(w.a)();return Object(q.jsxs)("div",{className:t.root,children:[Object(q.jsx)($e,{className:t.nav}),Object(q.jsxs)(E.a,{className:t.intro,style:{backgroundImage:"url(/img/home/home-2.jpg)",backgroundSize:"cover"},children:[Object(q.jsxs)(T.a,{component:"h1",variant:"h2",align:"center",style:{color:a.palette.primary.contrastText},gutterBottom:!0,children:["Welcome to ",Object(q.jsx)("b",{children:"V-Gifts"})]}),Object(q.jsx)(T.a,{variant:"h3",align:"center",style:{color:a.palette.primary.contrastText},paragraph:!0,children:"Join us today and receive $2000!"}),Object(q.jsxs)(E.a,{display:"flex",style:{marginTop:"2rem"},children:[Object(q.jsx)(X.a,{color:"primary",variant:"contained",className:t.joinButton,component:l.b,to:"/register",children:"Join"}),Object(q.jsx)(X.a,{color:"secondary",variant:"outlined",component:l.b,to:"/products",children:"Browse the market"})]}),Object(q.jsxs)(T.a,{style:{color:a.palette.primary.contrastText,marginTop:"0.5rem"},children:["Already a member? Log in ",Object(q.jsx)("b",{children:Object(q.jsx)(l.b,{to:"./login",style:{color:a.palette.primary.contrastText},children:"Here"})})]})]})]})},Ke=a(56),Qe=a(86),Xe=a(172),et=a.n(Xe),tt=a(323),at=a(327),nt=a(325),rt=a(326),ct=a(324);function it(e){var t=function(){e.setOpen(!1)},a=Object(n.useState)(!1),r=Object(o.a)(a,2),c=r[0],i=r[1],s=Object(n.useState)(60),l=Object(o.a)(s,2),d=l[0],j=l[1],u=Object(n.useState)(""),m=Object(o.a)(u,2),b=m[0],p=m[1],x=Object(n.useState)({error:!1,help_text:""}),O=Object(o.a)(x,2),g=O[0],f=O[1];Object(n.useEffect)((function(){var e;return c&&(e=setInterval((function(){j((function(t){return t<=1?(i(!1),clearInterval(e),60):t-1}))}),1e3)),function(){return clearInterval(e)}}),[c]);return Object(q.jsx)("div",{children:Object(q.jsx)(tt.a,{open:e.open,onClose:t,"aria-labelledby":"form-dialog-title",children:Object(q.jsxs)("form",{children:[Object(q.jsx)(ct.a,{id:"form-dialog-title",children:"FORGET PASSWORD"}),Object(q.jsxs)(nt.a,{children:[Object(q.jsx)(rt.a,{children:"Send to your email address get a temporary password"}),Object(q.jsx)(ae.a,{error:g.error,helperText:g.help_text,variant:"outlined",margin:"dense",id:"name",label:"Email Address",type:"email",onChange:function(e){p(e.target.value)},onClick:function(e){f({error:!1,help_text:""})},style:{width:"75%",marginRight:"10px"}}),Object(q.jsx)(X.a,{variant:"outlined",style:{marginTop:"7px"},disabled:c,onClick:function(e){i(!0),h.a.post("/user/login/send_mail/",{email:b}).then((function(e){200===e.status?console.log(e):(console.log(e),f({error:!0,help_text:"invalid email"}))}))},children:c?d:"send"})]}),Object(q.jsx)(at.a,{children:Object(q.jsx)(X.a,{onClick:t,color:"primary",children:"Close"})})]})})})}function st(){return Object(q.jsxs)(T.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(q.jsx)(l.b,{color:"inherit",to:"/",children:"V-Gift"})," ",(new Date).getFullYear(),"."]})}var ot=Object(y.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(/img/home/home-1.jpg)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},adminButton:{position:"fixed",bottom:0,marginLeft:"1rem",marginBottom:"1rem"}}}));var lt=function(e){var t=e.setAuth,a=Object(Ke.a)(e,["setAuth"]),c=r.a.useState({account_name:"",password:"",showPassword:!1}),i=Object(o.a)(c,2),d=i[0],j=i[1],u=function(e){return function(t){j(Object(s.a)(Object(s.a)({},d),{},Object(te.a)({},e,t.target.value)))}},m=r.a.useState({error:!1,help_text:""}),b=Object(o.a)(m,2),p=b[0],x=b[1],O=function(){return function(e){x({error:!1,help_text:""})}},g=Object(n.useState)(!1),f=Object(o.a)(g,2),v=f[0],y=f[1],C=ot(),N=Object(w.a)();return Object(q.jsxs)(z.a,{container:!0,component:"main",className:C.root,children:[Object(q.jsx)(S.a,{}),Object(q.jsx)(z.a,{item:!0,xs:!1,sm:4,md:7,className:C.image}),Object(q.jsxs)(z.a,{item:!0,xs:12,sm:8,md:5,component:Qe.a,elevation:6,square:!0,children:[Object(q.jsxs)("div",{className:C.paper,children:[Object(q.jsx)(D.a,{className:C.avatar,children:Object(q.jsx)(et.a,{})}),Object(q.jsx)(T.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(q.jsxs)("form",{className:C.form,noValidate:!0,onSubmit:function(e){e.preventDefault(),h.a.post("user/login",Object(s.a)({},d)).then((function(e){var n=e.data;console.log(n.code),465===n.code?x({error:!0,help_text:"Invalid account name/Password error"}):464===n.code?x({error:!0,help_text:"Invalid account name"}):(t(n.token,n.user_id),a.history.push("/products"))}))},children:[Object(q.jsx)(ae.a,{error:p.error,helperText:p.help_text,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Account Name",name:"email",autoComplete:"email",autoFocus:!0,onChange:u("account_name"),onClick:O()}),Object(q.jsx)(qe.a,{type:d.showPassword?"text":"password",value:d.password,error:p.error,helperText:p.help_text,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",placeholder:"Password",id:"password",autoComplete:"current-password",onChange:u("password"),onClick:O(),endAdornment:Object(q.jsx)(Le.a,{position:"end",children:Object(q.jsx)(He.a,{"aria-label":"toggle password visibility",onClick:function(){j(Object(s.a)(Object(s.a)({},d),{},{showPassword:!d.showPassword}))},onMouseDown:function(e){e.preventDefault()},edge:"end",children:d.showPassword?Object(q.jsx)(Re.a,{}):Object(q.jsx)(We.a,{})})})}),Object(q.jsx)(X.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:C.submit,children:"Sign In"}),Object(q.jsxs)(z.a,{container:!0,children:[Object(q.jsx)(z.a,{item:!0,xs:!0,children:Object(q.jsx)(l.b,{button:!0,variant:"body2",color:N.palette.secondary.contrastText,onClick:function(e){y(!0)},children:"Forgot password?"})}),Object(q.jsx)(z.a,{item:!0,children:Object(q.jsx)(l.b,{to:"/register",variant:"body2",color:N.palette.primary.contrastText,children:"Don't have an account? Sign Up"})})]}),Object(q.jsx)(E.a,{mt:5,children:Object(q.jsx)(st,{})})]})]}),Object(q.jsx)(X.a,{className:C.adminButton,color:"secondary",variant:"outlined",component:l.b,to:"/admin/login",children:"Admin Login"})]}),Object(q.jsx)(it,{open:v,setOpen:y})]})},dt=a(173),jt=a.n(dt),ut=a(264),mt=a(328),ht=Object(y.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},container:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"40px"},grid:{width:"75%"},margin:{marginRight:"30px",marginTop:"20px"}}})),bt=r.a.forwardRef((function(e,t){return Object(q.jsx)(ut.a,Object(s.a)({direction:"up",ref:t},e))}));function pt(e){var t=ht(),a=r.a.useContext(v).user,c=function(){e.setOpen(!1)},i=Object(n.useState)({fname:"",lname:"",address:"",city:"",country:""}),l=Object(o.a)(i,2),d=l[0],j=l[1],u=function(e){return function(t){j(Object(s.a)(Object(s.a)({},d),{},Object(te.a)({},e,t.target.value)))}};return Object(q.jsx)("div",{children:Object(q.jsxs)(tt.a,{fullScreen:!0,open:e.open,onClose:c,TransitionComponent:bt,children:[Object(q.jsx)(N.a,{className:t.appBar,children:Object(q.jsxs)(k.a,{children:[Object(q.jsx)(He.a,{edge:"start",color:"inherit",onClick:c,"aria-label":"close",children:Object(q.jsx)(jt.a,{})}),Object(q.jsx)(T.a,{variant:"h6",className:t.title,children:"EDIT PROFILE"})]})}),Object(q.jsx)("form",{onSubmit:function(t){t.preventDefault(),h.a.post("/user/profile/edit",Object(s.a)(Object(s.a)({},d),{},{token:a})).then((function(t){200===t.status&&(e.setProfile(Object(s.a)({},d)),console.log(t))}))},children:Object(q.jsx)(mt.a,{className:t.container,children:Object(q.jsxs)(z.a,{container:!0,className:t.grid,item:!0,xs:12,spacing:1,children:[Object(q.jsx)(z.a,{item:!0,xs:6,children:Object(q.jsx)(ae.a,{className:t.margin,label:"First name",placeholder:"Enter First Name Here..",id:"first_name",name:"first_name",onChange:u("fname"),variant:"outlined",fullWidth:!0,required:!0})}),Object(q.jsx)(z.a,{item:!0,xs:6,children:Object(q.jsx)(ae.a,{className:t.margin,label:"Last name",placeholder:"Enter Last Name Here..",name:"last_name",onChange:u("lname"),variant:"outlined",fullWidth:!0,required:!0})}),Object(q.jsx)(z.a,{item:!0,xs:12,children:Object(q.jsx)(ae.a,{className:t.margin,label:"Address",placeholder:"Enter your Address Here..",name:"address",onChange:u("address"),variant:"outlined",fullWidth:!0,required:!0})}),Object(q.jsx)(z.a,{item:!0,xs:6,children:Object(q.jsx)(ae.a,{className:t.margin,label:"City",placeholder:"Enter City Name Here..",name:"city",onChange:u("city"),variant:"outlined",fullWidth:!0,required:!0})}),Object(q.jsx)(z.a,{item:!0,xs:6,children:Object(q.jsx)(ae.a,{className:t.margin,label:"Country",placeholder:"Select Country Name Here..",name:"country",onChange:u("country"),variant:"outlined",fullWidth:!0,required:!0})}),Object(q.jsx)(z.a,{item:!0,xs:4,children:Object(q.jsx)(X.a,{variant:"contained",color:"primary",style:{width:"80%",marginLeft:"680px",marginTop:"20px"},type:"submit",children:"Update"})})]})})})]})})}function xt(e){var t=r.a.useContext(v).user,a=Object(n.useState)(!1),c=Object(o.a)(a,2),i=c[0],l=c[1],d=Object(n.useState)({severity:"",message:""}),j=Object(o.a)(d,2),u=j[0],m=j[1],b=function(){e.setOpen(!1)},p=Object(n.useState)({oldPassword:"",newPassword:"",confirmPassword:""}),x=Object(o.a)(p,2),O=x[0],g=x[1],f=function(e){return function(t){g(Object(s.a)(Object(s.a)({},O),{},Object(te.a)({},e,t.target.value)))}},y=Object(n.useState)({error:!1,help_text:""}),w=Object(o.a)(y,2),C=w[0],N=w[1],k=function(){return function(e){N({error:!1,help_text:""})}};return Object(q.jsx)("div",{children:Object(q.jsxs)(tt.a,{open:e.open,onClose:b,"aria-labelledby":"form-dialog-title",children:[Object(q.jsx)(ct.a,{id:"form-dialog-title",children:"Change Password"}),Object(q.jsxs)("form",{onSubmit:function(e){e.preventDefault(),O.confirmPassword!==O.newPassword?N({error:!0,help_text:"Confirm Password not match New Password"}):h.a.post("/user/profile/password/change",{old_password:O.oldPassword,new_password:O.newPassword,token:t}).then((function(e){200===e.status?(m(ve),l(!0)):N({error:!0,help_text:"Old Password is not correct"})}))},children:[Object(q.jsxs)(nt.a,{children:[Object(q.jsx)(ae.a,{error:C.error,helperText:C.help_text,autoFocus:!0,variant:"outlined",margin:"dense",label:"Old Password",type:"password",onChange:f("oldPassword"),onClick:k(),fullWidth:!0,required:!0}),Object(q.jsx)(ae.a,{error:C.error,helperText:C.help_text,style:{marginTop:"20px"},autoFocus:!0,variant:"outlined",margin:"dense",label:"New Password",type:"password",onChange:f("newPassword"),onClick:k(),fullWidth:!0,required:!0}),Object(q.jsx)(ae.a,{error:C.error,helperText:C.help_text,style:{marginTop:"20px"},autoFocus:!0,variant:"outlined",margin:"dense",label:"Confirm New Password",type:"password",onChange:f("confirmPassword"),onClick:k(),fullWidth:!0,required:!0})]}),Object(q.jsxs)(at.a,{children:[Object(q.jsx)(X.a,{onClick:b,color:"primary",children:"Close"}),Object(q.jsx)(X.a,{type:"submit",color:"primary",children:"Confirm"})]})]}),i&&Object(q.jsx)(je,{severity:u.severity,message:u.message,open:i,setOpen:l})]})})}var Ot=a(174),gt=a.n(Ot),ft=a(116),vt=a.n(ft),yt=a(175),wt=a.n(yt),Ct=Object(y.a)((function(e){return{root:{},gridItem:{height:e.spacing(65)},cardTitle:{display:"flex",alignItems:"center",marginBottom:e.spacing(1)},cardIcon:{width:e.spacing(8),height:e.spacing(8),marginRight:e.spacing(.5)},cardTitleText:{textDecoration:"none",fontWeight:"200",color:e.palette.primary.contrastText},cardContent:{display:"flex",flexDirection:"column",alignItems:"start"}}}));var Nt=function(e){var t=Ct(),a=Object(w.a)(),c=Object(d.g)(),i=e.token,s=Object(n.useState)(e.profile),l=Object(o.a)(s,2),j=l[0],u=l[1],m=Object(n.useState)(j.fund),b=Object(o.a)(m,2),p=b[0],x=b[1],O=Object(n.useState)([]),g=Object(o.a)(O,2),f=g[0],v=g[1],y=Object(n.useState)(!1),C=Object(o.a)(y,2),N=C[0],k=C[1],_=Object(n.useState)({severity:"",message:""}),S=Object(o.a)(_,2),I=S[0],A=S[1];r.a.useEffect((function(){h.a.get("/user/profile",{params:{token:i}}).then((function(e){var t=e.data;u({first_name:t.first_name,last_name:t.last_name,username:t.username,email:t.email,address:t.address,fund:t.fund})})).catch((function(e){}))}),[i,j]);var P=Object(n.useState)(!1),D=Object(o.a)(P,2),E=D[0],R=D[1],B=Object(n.useState)(!1),W=Object(o.a)(B,2),L=W[0],H=W[1];return Object(n.useEffect)((function(){h.a.get("/user/cart/list",{params:{token:i}}).then((function(e){var t=e.data;console.log(t),v(t)})).catch((function(e){})),h.a.get("/user/cart/list",{params:{token:i}}).then((function(e){var t=e.data;console.log(t),v(t)})).catch((function(e){}))}),[i]),Object(q.jsxs)("div",{classeName:t.root,children:[Object(q.jsxs)(z.a,{container:!0,spacing:3,children:[Object(q.jsxs)(z.a,{item:!0,md:3,xs:12,children:[Object(q.jsx)(U.a,{className:t.gridItem,variant:"outlined",children:Object(q.jsxs)(V.a,{className:t.cardContent,children:[Object(q.jsxs)("div",{className:t.cardTitle,children:[Object(q.jsx)(Z.a,{className:t.cardIcon}),Object(q.jsx)(T.a,{variant:"h4",classname:t.cardTitleText,children:"My Details"})]}),Object(q.jsxs)(T.a,{variant:"h5",color:a.palette.primary.contrastText,component:"p",children:["Name: ",j.first_name," ",j.last_name]}),Object(q.jsxs)(T.a,{variant:"h5",color:a.palette.primary.contrastText,component:"p",children:["Username: ",j.username]}),Object(q.jsxs)(T.a,{variant:"h5",color:a.palette.primary.contrastText,component:"p",children:["Email: ",j.email]}),Object(q.jsxs)(T.a,{variant:"h5",color:a.palette.primary.contrastText,component:"p",children:["Address: ",j.address]}),Object(q.jsx)(X.a,{variant:"contained",color:"primary",style:{marginTop:"10px"},onClick:function(){R(!0)},children:"EDIT PROFILE"}),Object(q.jsx)(X.a,{variant:"contained",color:"secondary",style:{marginTop:"10px"},onClick:function(){H(!0)},children:"CHANGE PASSWORD"})]})}),Object(q.jsx)(pt,{profile:j,setProfile:u,open:E,setOpen:R}),Object(q.jsx)(xt,{open:L,setOpen:H})]}),Object(q.jsx)(z.a,{item:!0,md:3,xs:12,children:Object(q.jsx)(U.a,{className:t.gridItem,variant:"outlined",children:Object(q.jsxs)(V.a,{className:t.cardContent,children:[Object(q.jsxs)("div",{className:t.cardTitle,children:[Object(q.jsx)(gt.a,{className:t.cardIcon}),Object(q.jsx)(T.a,{variant:"h4",classname:t.cardTitleText,children:"Balance"})]}),Object(q.jsx)(T.a,{variant:"h5",color:a.palette.primary.contrastText,component:"p",children:"$".concat(j.fund," left")}),Object(q.jsx)(T.a,{variant:"h5",color:a.palette.primary.contrastText,style:{marginTop:"1rem"},children:"Add Fund:"}),Object(q.jsx)(ae.a,{id:"outlined-number",label:"Number",type:"number",size:"small",value:p,InputLabelProps:{shrink:!0},variant:"outlined",style:{marginBottom:"1rem"},inputProps:{step:100,min:0},onChange:function(e){x(e.target.value)}}),Object(q.jsx)(X.a,{variant:"contained",color:"primary",onClick:function(){if(p<0)return A(be),void k(!0);h.a.post("/user/profile/fund/add",{token:i,num:p}).then((function(e){var t=e.data;console.log(t),c.go(0)})).catch((function(e){}))},children:"Add"})]})})}),Object(q.jsx)(z.a,{item:!0,md:3,xs:12,children:Object(q.jsx)(U.a,{className:t.gridItem,variant:"outlined",children:Object(q.jsxs)(V.a,{className:t.cardContent,children:[Object(q.jsxs)("div",{className:t.cardTitle,children:[Object(q.jsx)(wt.a,{className:t.cardIcon}),Object(q.jsx)(T.a,{variant:"h4",classname:t.cardTitleText,children:"Cart"})]}),Object(q.jsxs)(T.a,{variant:"h5",color:a.palette.primary.contrastText,component:"p",children:[f.length," items in cart"]})]})})}),Object(q.jsx)(z.a,{item:!0,md:3,xs:12,children:Object(q.jsx)(U.a,{className:t.gridItem,variant:"outlined",children:Object(q.jsxs)(V.a,{className:t.cardContent,children:[Object(q.jsxs)("div",{className:t.cardTitle,children:[Object(q.jsx)(vt.a,{className:t.cardIcon}),Object(q.jsx)(T.a,{variant:"h4",classname:t.cardTitleText,children:"Orders"})]}),Object(q.jsxs)(T.a,{variant:"h5",color:a.palette.primary.contrastText,component:"p",children:[e.ordersNum," orders in total"]})]})})})]}),N&&Object(q.jsx)(je,{severity:I.severity,message:I.message,open:N,setOpen:k})]})},kt=a(177),_t=a.n(kt),St=a(348),Tt=a(176),It=a.n(Tt),At=a(118),Pt=Object(y.a)((function(e){return{root:{margin:5,borderRadius:5,overflow:"hidden",width:"100%"},grid:{},img:{height:"10rem",width:"10rem",padding:10}}}));function Dt(e){var t=Pt(),a=Object(w.a)(),c=r.a.useContext(v).user,i=_e()(parseFloat(1e3*e.purchase_date)).format("YYYY-MM-DD HH:mm:ss"),s=Object(n.useState)({disabled:0!==e.rating,value:e.rating}),d=Object(o.a)(s,2),j=d[0],u=d[1],m=Object(n.useState)(e.state_in_text),b=Object(o.a)(m,2),p=b[0],x=b[1],O=Object(n.useState)(!1),g=Object(o.a)(O,2),f=g[0],y=g[1],C=Object(n.useState)(!1),N=Object(o.a)(C,2),k=N[0],_=N[1],S=Object(n.useState)(!1),T=Object(o.a)(S,2),I=T[0],A=T[1],P=Object(n.useState)({severity:"",message:""}),D=Object(o.a)(P,2),R=D[0],B=D[1];Object(n.useEffect)((function(){"Delivering"===e.state_in_text&&y(!0),"Just purchase"===e.state_in_text&&_(!0)}));return Object(q.jsxs)("div",{className:t.root,style:{border:"1px solid ".concat(a.palette.primary.contrastText)},children:[Object(q.jsxs)(z.a,{className:t.grid,container:!0,spacing:3,alignItems:"center",children:[Object(q.jsx)(z.a,{item:!0,xs:2,children:Object(q.jsx)(At.a,{className:t.image,component:l.b,to:"/product/".concat(e.product_id),children:Object(q.jsx)("img",{className:t.img,src:e.pic_link,alt:"props.product_id"})})}),Object(q.jsx)(z.a,{item:!0,xs:3,children:e.product_name}),Object(q.jsxs)(z.a,{item:!0,xs:1,children:[Object(q.jsxs)("p",{children:["Quantity: ",e.amount]}),Object(q.jsxs)("p",{children:["$",e.cost]})]}),Object(q.jsxs)(z.a,{item:!0,xs:2,children:[Object(q.jsx)("p",{children:i}),Object(q.jsx)("p",{children:"State: ".concat(p)})]}),Object(q.jsx)(z.a,{item:!0,xs:2,children:Object(q.jsx)(E.a,{component:"fieldset",mb:3,borderColor:"transparent",children:Object(q.jsx)(St.a,{onChange:function(t){console.log(t.target.value),console.log(e.order_id),console.log(c),h.a.post("/order/rate",{token:"".concat(c),order_id:parseInt(e.order_id),rating:parseInt(t.target.value)}).then((function(e){console.log(e)})),u({disabled:!0,value:t.target.value})},disabled:j.disabled,value:j.value,precision:.5,emptyIcon:Object(q.jsx)(It.a,{fontSize:"inherit"})})})}),Object(q.jsxs)(z.a,{item:!0,xs:2,children:[f&&Object(q.jsx)(X.a,{variant:"contained",color:"primary",style:{marginBottom:"20px",width:"70%"},onClick:function(t){h.a.post("/order/receive",{token:c,order_id:e.order_id}).then((function(e){200===e.status&&(B(ge),A(!0),y(!1),x("Done"))}))},children:"Received"}),k&&Object(q.jsx)(X.a,{variant:"contained",color:"secondary",style:{marginBottom:"20px",width:"70%"},onClick:function(t){h.a.post("/order/refund",{token:c,order_id:e.order_id}).then((function(e){200===e.status&&(console.log(e),B(fe),A(!0),x("Cancelled / Refunded"))}))},children:"Refund"})]})]}),I&&Object(q.jsx)(je,{severity:R.severity,message:R.message,open:I,setOpen:A})]})}var Et=a(83),Rt=a.n(Et),Bt=Object(y.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerPaper:{width:240},drawerContainer:{overflow:"auto"},content:{flexGrow:1,padding:e.spacing(3)},logo:{margin:"auto",textAlign:"center",maxWidth:"auto",maxHeight:"7vh",marginRight:"0.5rem"},title:{flexGrow:1}}}));function Wt(e){var t=Bt(),a=Object(w.a)(),n=Object(d.g)(),c=r.a.useContext(v).user,i=e.profile,j=r.a.useState({home:!0,orders:!1,users:!1}),u=Object(o.a)(j,2),m=u[0],b=u[1],p=r.a.useState([]),x=Object(o.a)(p,2),O=x[0],g=x[1];r.a.useEffect((function(){h.a.get("/order/list",{params:{token:c}}).then((function(e){console.log(e.data),g(e.data)}))}),[c]);var f=Object(q.jsx)(Nt,{token:c,profile:i,ordersNum:O.length}),y=function(e){h.a.post("/user/logout",{token:c}).then((function(e){console.log(e),localStorage.removeItem("id"),localStorage.removeItem("token"),n.go(0)})).catch((function(e){console.log(e)}))};return Object(q.jsxs)("div",{className:t.root,children:[Object(q.jsx)(S.a,{}),Object(q.jsx)(N.a,{position:"fixed",className:t.appBar,elevation:0,children:Object(q.jsxs)(k.a,{children:[Object(q.jsx)(T.a,{style:{textDecoration:"none",fontWeight:"200",color:a.palette.primary.contrastText},color:"inherit",component:l.b,to:"/products",className:t.title,variant:"h4",noWrap:!0,children:"V-Gifts | My Profile"}),Object(q.jsx)(X.a,{variant:"contained",color:"secondary",onClick:y,children:"Log out"})]})}),Object(q.jsxs)(C.a,{className:t.drawer,variant:"permanent",classes:{paper:t.drawerPaper},children:[Object(q.jsx)(k.a,{}),Object(q.jsx)("div",{className:t.drawerContainer,children:Object(q.jsxs)(_.a,{children:[Object(q.jsxs)(I.a,{button:!0,onClick:function(){b({home:!0,orders:!1,users:!1})},children:[Object(q.jsx)(A.a,{children:Object(q.jsx)(G.a,{})}),Object(q.jsx)(P.a,{primary:"Home"})]},"Home"),Object(q.jsxs)(I.a,{button:!0,component:l.b,to:"/profile/".concat(c,"/cart"),children:[Object(q.jsx)(A.a,{children:Object(q.jsx)(Rt.a,{})}),Object(q.jsx)(P.a,{primary:"Cart"})]},"Cart"),Object(q.jsxs)(I.a,{button:!0,onClick:function(){b({home:!1,orders:!0,users:!1})},children:[Object(q.jsx)(A.a,{children:Object(q.jsx)(vt.a,{})}),Object(q.jsx)(P.a,{primary:"Orders"})]},"Orders"),Object(q.jsxs)(I.a,{button:!0,onClick:y,children:[Object(q.jsx)(A.a,{children:Object(q.jsx)(_t.a,{})}),Object(q.jsx)(P.a,{primary:"Log out"})]},"Logout")]})})]}),Object(q.jsxs)("main",{className:t.content,children:[Object(q.jsx)(k.a,{}),Object(q.jsxs)(E.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[Object(q.jsx)(D.a,{alt:"Admin Avartar",src:"/img/profile/profile-1.jpg",variant:"rounded",style:{border:"1px solid ".concat(a.palette.primary.contrastText),width:a.spacing(20),height:a.spacing(20),marginBottom:a.spacing(5)}}),m.orders&&Object(q.jsx)("h1",{children:"Orders history"})]}),m.home&&f,m.orders&&O.map((function(e,t){return Object(q.jsx)(Dt,Object(s.a)({},e),t)}))]})]})}function Lt(e){var t=r.a.useContext(v).user,a=r.a.useState({first_name:"",last_name:"",username:"",email:"",address:"",fund:0}),n=Object(o.a)(a,2),c=n[0],i=n[1];return r.a.useEffect((function(){h.a.get("/user/profile",{params:{token:t}}).then((function(e){var t=e.data;i({first_name:t.first_name,last_name:t.last_name,username:t.username,email:t.email,address:t.address,fund:t.fund})})).catch((function(e){}))}),[t]),Object(q.jsx)("div",{children:Object(q.jsx)(Wt,{profile:c,history:e.history})})}var Ht=Object(y.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center"},grid:{width:"75%"}}}));var qt=function(e){var t=e.setAuth,a=Object(Ke.a)(e,["setAuth"]),r=Ht(),c=Object(n.useState)({account_name:"",first_name:"",last_name:"",email:"",password:"",address:"",city:"",country:""}),i=Object(o.a)(c,2),l=i[0],d=i[1],j=function(e){return function(t){d(Object(s.a)(Object(s.a)({},l),{},Object(te.a)({},e,t.target.value)))}},u=Object(n.useState)({email_error:!1,account_error:!1,password_error:!1,email_text:"",account_text:"",password_text:""}),m=Object(o.a)(u,2),b=m[0],p=m[1],x=function(){return function(e){p({email_error:!1,account_error:!1,password_error:!1,email_text:"",account_text:"",password_text:""})}};return Object(q.jsx)("div",{className:r.root,children:Object(q.jsxs)(z.a,{className:r.grid,container:!0,spacing:2,children:[Object(q.jsx)(z.a,{item:!0,xs:12,children:Object(q.jsx)(T.a,{variant:"h3",style:{textAlign:"center"},children:"Your Details"})}),Object(q.jsx)("form",{onSubmit:function(e){var n,r;n=e,r=a.handleNext,n.preventDefault(),h.a.post("user/register",Object(s.a)({},l)).then((function(e){var a=e.data;463===a.code?p({account_error:!0,account_text:"Account name exists"}):468===a.code?p({email_error:!0,email_text:"Email exists"}):461===a.code?p({account_error:!0,account_text:"Account name invalid"}):(t(a.token,a.user_id),r())}))},children:Object(q.jsxs)(z.a,{container:!0,item:!0,xs:12,spacing:1,children:[Object(q.jsx)(z.a,{item:!0,xs:6,children:Object(q.jsx)(ae.a,{label:"First name",placeholder:"Enter First Name Here..",id:"first_name",name:"first_name",onChange:j("first_name"),variant:"outlined",fullWidth:!0,required:!0})}),Object(q.jsx)(z.a,{item:!0,xs:6,children:Object(q.jsx)(ae.a,{label:"Last name",placeholder:"Enter Last Name Here..",name:"last_name",onChange:j("last_name"),variant:"outlined",fullWidth:!0,required:!0})}),Object(q.jsx)(z.a,{item:!0,xs:12,children:Object(q.jsx)(ae.a,{error:b.email_error,helperText:b.email_text,label:"E-mail",placeholder:"Enter Email Address Here..",className:"form-control",name:"email",onChange:j("email"),onClick:x(),onBlur:function(e){/^[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+){0,4}@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+){0,4}$/.test(e.target.value)||""===e.target.value||p({email_error:!0,email_text:"Invalid E-mail format"})},variant:"outlined",fullWidth:!0,required:!0})}),Object(q.jsx)(z.a,{item:!0,xs:12,children:Object(q.jsx)(ae.a,{error:b.account_error,helperText:b.account_text,label:"Account name",placeholder:"Enter your account name here..",name:"account_name",onChange:j("account_name"),onClick:x(),variant:"outlined",fullWidth:!0,required:!0})}),Object(q.jsx)(z.a,{item:!0,xs:12,children:Object(q.jsx)(ae.a,{label:"Password",type:"password",placeholder:"Enter Password Here..",name:"password",onChange:j("password"),onClick:x(),variant:"outlined",fullWidth:!0,required:!0})}),Object(q.jsx)(z.a,{item:!0,xs:12,children:Object(q.jsx)(ae.a,{error:b.password_error,helperText:b.password_text,label:"Confirmed Password",type:"password",placeholder:"Enter Confirmed Password Here..",name:"password",onClick:x(),onBlur:function(e){l.password!==e.target.value&&""!==e.target.value&&""!==l.password&&p({password_error:!0,password_text:"Password does not match"})},variant:"outlined",fullWidth:!0,required:!0})}),Object(q.jsx)(z.a,{item:!0,xs:12,children:Object(q.jsx)(ae.a,{label:"Address",placeholder:"Enter your Address Here..",name:"address",onChange:j("address"),variant:"outlined",fullWidth:!0,required:!0})}),Object(q.jsx)(z.a,{item:!0,xs:6,children:Object(q.jsx)(ae.a,{label:"City",placeholder:"Enter City Name Here..",name:"city",onChange:j("city"),variant:"outlined",fullWidth:!0,required:!0})}),Object(q.jsx)(z.a,{item:!0,xs:6,children:Object(q.jsx)(ae.a,{label:"Country",placeholder:"Select Country Name Here..",className:"form-control",name:"country",onChange:j("country"),variant:"outlined",fullWidth:!0,required:!0})}),Object(q.jsx)(z.a,{item:!0,xs:6}),Object(q.jsx)(z.a,{item:!0,xs:6,children:Object(q.jsx)(X.a,{variant:"contained",color:"primary",style:{width:"100%"},type:"submit",children:"Next"})})]})})]})})},Ft=a(37),Mt=a(350),Gt="secondary",zt="default";function Ut(e){var t=Object(n.useState)(zt),a=Object(o.a)(t,2),r=a[0],c=a[1];return Object(q.jsx)(Mt.a,{label:e.label,color:r,style:{marginRight:"1rem",marginBottom:"0.5rem"},onClick:function(){return function(t){switch(r){case zt:c(Gt),e.handleAdd(t);break;case Gt:c(zt),e.handleRemove(t)}}(e.label)}})}function Vt(e){e.setSelected;var t=e.handleAdd,a=e.handleRemove,r=Object(Ke.a)(e,["setSelected","handleAdd","handleRemove"]),c=Object(n.useState)(r.interests),i=Object(o.a)(c,2),s=i[0],l=i[1];return Object(n.useEffect)((function(){l(r.interests)}),[]),Object(q.jsx)("div",{children:s.map((function(e){return Object(q.jsx)(Ut,{label:e,handleAdd:t,handleRemove:a},e)}))})}var Yt=Object(y.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center"},grid:{width:"75%"}}}));var $t=function(e){var t=Yt(),a=Object(n.useContext)(v).user,r=Object(d.g)(),c=Object(n.useState)(e.interests),i=Object(o.a)(c,2),s=i[0],l=(i[1],Object(n.useState)([])),j=Object(o.a)(l,2),u=j[0],m=j[1];return Object(q.jsx)("div",{className:t.root,children:Object(q.jsxs)(z.a,{className:t.grid,container:!0,spacing:2,children:[Object(q.jsxs)(z.a,{item:!0,xs:12,children:[Object(q.jsx)(T.a,{variant:"h3",style:{textAlign:"center"},children:"Interests:"}),Object(q.jsx)(T.a,{variant:"subtitle1",style:{textAlign:"center"},children:"Register completed! Welcome to V-Gifts. Now you can select your interests for better recommendations send to you"})]}),Object(q.jsx)(z.a,{item:!0,xs:12,children:Object(q.jsx)(Vt,{interests:s,setSelected:m,handleAdd:function(e){m((function(t){return[].concat(Object(Ft.a)(t),[e])}))},handleRemove:function(e){m(u.filter((function(t){return t!==e})))}})}),Object(q.jsxs)(z.a,{container:!0,item:!0,xs:12,spacing:2,children:[Object(q.jsx)(z.a,{item:!0,xs:6}),Object(q.jsx)(z.a,{item:!0,xs:3,children:Object(q.jsx)(X.a,{variant:"outlined",color:"secondary",style:{width:"100%"},onClick:function(){r.push("/products")},children:"Skip"})}),Object(q.jsx)(z.a,{item:!0,xs:3,children:Object(q.jsx)(X.a,{variant:"contained",color:"secondary",style:{width:"100%"},onClick:function(){return e.handleNext,void h.a.post("/user/set_interest",{token:a,interest_lst:u}).then((function(e){r.push("/products")})).catch((function(e){}))},children:"Finish"})})]})]})})},Jt=a(11),Zt=a(146),Kt=a(142),Qt=a(179),Xt=a.n(Qt),ea=a(178),ta=a.n(ea),aa=Object(y.a)((function(e){return{grow:{width:"100%"},menuButton:{marginRight:e.spacing(2)},title:{marginRight:e.spacing(2)},marketButton:{marginRight:e.spacing(2)},search:{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Jt.d)(e.palette.common.white,.45),"&:hover":{backgroundColor:Object(Jt.d)(e.palette.common.white,.55)},marginLeft:0,minWidth:"10rem",flexGrow:1},searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},sectionDesktop:{display:"flex"},toolBar:{minHeight:"10vh",display:"flex",alignItems:"center"},logo:{margin:"auto",textAlign:"center",maxWidth:"auto",maxHeight:"7vh",marginRight:"0.5rem"}}}));function na(e){var t=Object(n.useContext)(v).user,a=aa(),r=Object(w.a)(),c=Object(n.useState)(""),i=Object(o.a)(c,2),s=i[0],d=i[1],j=Object(n.useState)(0),u=Object(o.a)(j,2),m=u[0],b=u[1],p=Object(q.jsx)(X.a,{component:l.b,to:"/login",variant:"outlined",children:"Login/Register"}),x=Object(q.jsxs)("div",{children:[Object(q.jsx)(He.a,{"aria-label":"cart",color:"inherit",component:l.b,to:"/profile/".concat(t,"/cart"),children:Object(q.jsx)(Kt.a,{badgeContent:m,color:"secondary",children:Object(q.jsx)(Rt.a,{})})}),Object(q.jsxs)(X.a,{component:l.b,to:"/profile/".concat(t),edge:"end","aria-label":"account of current user",color:"inherit",className:a.logo,children:[Object(q.jsx)(ta.a,{}),"Account"]})]});return Object(n.useEffect)((function(){t&&h.a.get("/user/get_cart_number",{params:{token:t}}).then((function(e){var t=e.data;b(t.cart_product_num)})).catch((function(e){}))}),[e.reload,t]),Object(q.jsx)("div",{className:a.grow,children:Object(q.jsx)(N.a,{position:"static",style:{boxShadow:"none"},children:Object(q.jsxs)(k.a,{className:a.toolBar,children:[Object(q.jsxs)(l.b,{to:"/products",style:{display:"flex",flexDirection:"row",alignItems:"center",textDecoration:"none"},children:[Object(q.jsx)("img",{className:a.logo,src:"/img/logo/logo-1.png",alt:"V-Gifts logo"}),Object(q.jsx)(T.a,{style:{textDecoration:"none",fontWeight:"200",color:r.palette.primary.contrastText},color:"inherit",className:a.title,variant:"h4",noWrap:!0,children:"V-Gifts"})]}),Object(q.jsxs)("div",{className:a.search,children:[Object(q.jsx)("div",{className:a.searchIcon,children:Object(q.jsx)(Xt.a,{})}),Object(q.jsx)(Zt.a,{placeholder:"Search\u2026",classes:{root:a.inputRoot,input:a.inputInput},inputProps:{"aria-label":"search"},onChange:function(e){d(e.target.value)},onKeyDown:function(t){"Enter"===t.key&&e.setKeyword(s)}})]}),Object(q.jsx)("div",{style:{flexGrow:"0.1"}}),Object(q.jsx)("div",{className:a.sectionDesktop,children:t?x:p})]})})})}var ra=a(346),ca=a(329),ia=a(343),sa=Object(y.a)((function(e){return{root:{width:"100%"},backButton:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));var oa=function(e){var t=e.setAuth,a=(Object(Ke.a)(e,["setAuth"]),sa()),r=Object(n.useState)(0),c=Object(o.a)(r,2),i=c[0],s=c[1],l=Object(n.useState)([]),d=Object(o.a)(l,2),j=d[0],u=d[1],m=["Register your personal info","Select your interests"],b=function(){s((function(e){return e+1}))},p=function(){s((function(e){return e-1}))};return Object(n.useEffect)((function(){h.a.get("/user/get_interest").then((function(e){var t=e.data;u(t.interest_list)})).catch((function(e){}))}),[]),Object(q.jsxs)("div",{className:a.root,children:[Object(q.jsx)(na,{}),Object(q.jsx)(ra.a,{activeStep:i,alternativeLabel:!0,children:m.map((function(e,t){return Object(q.jsx)(ca.a,{children:Object(q.jsxs)(ia.a,{children:[e,1===t?Object(q.jsx)(T.a,{variant:"caption",style:{display:"block"},children:"Optional"}):""]})},e)}))}),Object(q.jsx)("div",{children:function(e){switch(e){case 0:return Object(q.jsx)(qt,{handleNext:b,setAuth:t});case 1:return Object(q.jsx)($t,{interests:j,handleBack:p,handleNext:b});default:return}}(i)})]})},la=a(330),da=a(332),ja=a(331),ua=Object(y.a)((function(e){return{root:{height:"100%",display:"flex",flexDirection:"column"},media:{width:"auto",maxHeight:"20rem"},actionArea:{flexGrow:1},CardActions:{}}}));function ma(e){var t=ua(),a=Object(w.a)(),c=r.a.useContext(v).user,i=Object(n.useState)(e.id),s=Object(o.a)(i,2),d=s[0],j=(s[1],Object(n.useState)(e.name)),u=Object(o.a)(j,2),m=u[0],b=(u[1],Object(n.useState)(e.price)),p=Object(o.a)(b,2),x=p[0],O=(p[1],Object(n.useState)(e.rating)),g=Object(o.a)(O,2),f=(g[0],g[1],Object(n.useState)(e.img)),y=Object(o.a)(f,2),C=y[0];y[1];return Object(q.jsxs)(U.a,{className:t.root,children:[Object(q.jsxs)(la.a,{className:t.actionArea,component:l.b,to:"/product/".concat(d),children:[Object(q.jsx)("div",{style:{display:"flex",alignItem:"center",justifyContent:"center"},children:Object(q.jsx)(ja.a,{style:{width:"auto",maxHeight:"190px"},component:"img",image:C,title:"Contemplative Reptile"})}),Object(q.jsx)(V.a,{children:Object(q.jsx)(T.a,{gutterBottom:!0,variant:"h5",component:"h2",children:"".concat(m.split(" ").splice(0,15).join(" "))})})]}),Object(q.jsx)(da.a,{children:Object(q.jsxs)(z.a,{container:!0,style:{width:"100%"},spacing:1,children:[Object(q.jsx)(z.a,{item:!0,xs:5,children:Object(q.jsx)(X.a,{onClick:function(){c?h.a.post("/user/cart/add",{token:c,product_id:d,amount:1}).then((function(t){e.setModalType(2),e.handlePsModalOpen(),e.setNavbarReload((function(e){return e+1}))})).catch((function(e){})):e.handleNlModalOpen()},variant:"outlined",size:"small",style:{width:"100%",height:"100%",color:a.palette.primary.contrastText},children:Object(q.jsxs)(T.a,{variant:"body2",style:{cursor:"pointer"},children:[Object(q.jsx)(Rt.a,{})," Add to Cart"]})})}),Object(q.jsx)(z.a,{item:!0,xs:5,children:Object(q.jsx)(X.a,{onClick:function(){if(c){var t={token:c,list:[[d,1]]};h()({url:"/order/new",method:"post",data:t}).then((function(t){if(t.data.code===Se)return e.setAlertInfo(ue),void e.setAlertOpen(!0);e.setModalType(1),e.handlePsModalOpen()})).catch((function(e){console.log(e)}))}else e.handleNlModalOpen()},variant:"outlined",size:"small",style:{width:"100%",height:"100%",color:a.palette.primary.contrastText},children:Object(q.jsx)(T.a,{variant:"body2",style:{cursor:"pointer"},children:"Purchase"})})}),Object(q.jsx)(z.a,{item:!0,xs:2,children:Object(q.jsxs)(T.a,{variant:"h5",style:{textAlign:"end"},children:["$",x]})})]})})]})}var ha=a(334),ba=a(333),pa=a(181),xa=a.n(pa),Oa=a(182),ga=a.n(Oa),fa=Object(y.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},nested:{paddingLeft:e.spacing(8)}}}));function va(e){var t=fa();return Object(q.jsxs)(_.a,{className:t.root,children:[Object(q.jsx)(I.a,{role:void 0,button:!0,onClick:function(){return e.handleCategory("")},className:t.nested,children:Object(q.jsx)(P.a,{id:"list-label-all",primary:"All Products",style:{textTransform:"capitalize"}})},"all-products"),["for men","for women","for children","for friends","for elder","for relationship","foods","tools","luxuries","entertainment","working"].map((function(a,n){var r="list-label-".concat(a);return Object(q.jsx)(I.a,{role:void 0,button:!0,onClick:function(){return e.handleCategory(a)},className:t.nested,children:Object(q.jsx)(P.a,{id:r,primary:a,style:{textTransform:"capitalize"}})},a)}))]})}var ya=a(180),wa=a.n(ya);function Ca(e){var t=r.a.useState(!0),a=Object(o.a)(t,2),n=a[0],c=a[1];return Object(q.jsxs)(_.a,{children:[Object(q.jsxs)(I.a,{button:!0,onClick:function(){c(!n)},children:[Object(q.jsx)(A.a,{children:Object(q.jsx)(wa.a,{})}),Object(q.jsx)(P.a,{primary:"Categories"}),n?Object(q.jsx)(xa.a,{}):Object(q.jsx)(ga.a,{})]}),Object(q.jsx)(ba.a,{in:n,timeout:"auto",unmountOnExit:!0,children:Object(q.jsx)(_.a,{component:"div",disablePadding:!0,children:Object(q.jsx)(va,{handleCategory:e.handleCategory})})})]})}var Na=Object(y.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},nested:{paddingLeft:e.spacing(4)},ListItemText:{marginRight:5}}}));function ka(e){var t=Na();return Object(q.jsx)("div",{children:Object(q.jsx)(_.a,{component:"nav","aria-labelledby":"nested-list-subheader",subheader:Object(q.jsx)(ha.a,{component:"div",id:"nested-list-subheader",children:"Filter"}),className:t.root,children:Object(q.jsx)(Ca,{handleCategory:e.handleCategory})})})}var _a=a(341),Sa=a(199),Ta=a(195),Ia=a(196),Aa=Object(y.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},leftButton:{width:"100%",height:"4rem"},rightButton:{width:"100%",height:"4rem"}}}));function Pa(e){var t=Aa();return Object(q.jsx)("div",{children:Object(q.jsx)(Sa.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:e.open,onClose:e.handleClose,closeAfterTransition:!0,BackdropComponent:Ta.a,BackdropProps:{timeout:500},children:Object(q.jsx)(Ia.a,{in:e.open,children:Object(q.jsxs)("div",{className:t.paper,children:[function(e){switch(e){case 1:return Object(q.jsx)("h2",{children:"Thanks for your purchase!"});case 2:return Object(q.jsx)("h2",{children:"Item added to Cart!"});default:return Object(q.jsx)("h2",{children:"Modal"})}}(e.type),Object(q.jsxs)(z.a,{container:!0,spacing:1,children:[Object(q.jsx)(z.a,{item:!0,xs:6,children:Object(q.jsx)(X.a,{variant:"contained",color:"secondary",onClick:e.handleClose,className:t.leftButton,children:"Continue Shopping"})}),Object(q.jsx)(z.a,{item:!0,xs:6,children:function(a){switch(a){case 1:return Object(q.jsx)(X.a,{variant:"outlined",component:l.b,to:{pathname:"/profile/".concat(e.token)},className:t.rightButton,children:"My orders history"});case 2:return Object(q.jsx)(X.a,{variant:"outlined",component:l.b,to:{pathname:"/profile/".concat(e.token,"/cart")},className:t.rightButton,children:"View my cart"});default:return}}(e.type)})]})]})})})})}var Da=Object(y.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function Ea(e){var t=Da();return Object(q.jsx)("div",{children:Object(q.jsx)(Sa.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:e.open,onClose:e.handleClose,closeAfterTransition:!0,BackdropComponent:Ta.a,BackdropProps:{timeout:500},children:Object(q.jsx)(Ia.a,{in:e.open,children:Object(q.jsxs)("div",{className:t.paper,children:[Object(q.jsx)("h2",{id:"transition-modal-title",children:"Sorry, you are not logged in!"}),Object(q.jsxs)(z.a,{container:!0,spacing:1,children:[Object(q.jsx)(z.a,{item:!0,xs:6,children:Object(q.jsx)(X.a,{variant:"contained",color:"secondary",onClick:e.handleClose,children:"Continue Browsing"})}),Object(q.jsx)(z.a,{item:!0,xs:6,children:Object(q.jsx)(X.a,{variant:"outlined",component:l.b,to:{pathname:"/login"},children:"Login Now"})})]})]})})})})}function Ra(e){return Object(n.useEffect)((function(){!function(e,t){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://widget.kommunicate.io/v2/kommunicate.app",document.getElementsByTagName("head")[0].appendChild(a),window.kommunicate=t,t._globals={appId:"cd40e2ea8c553cb40b92422863201a17",popupWidget:!0,automaticChatOpenOnNavigation:!0}}(document,window.kommunicate||{})}),[]),Object(q.jsx)("div",{})}var Ba=a(335),Wa=a(336),La=a(337),Ha=a(183),qa=a.n(Ha),Fa=Object(y.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center"},main:{marginTop:"1rem",width:"90%"},leftContainer:{},rightContainer:{},pagination:{justifySelf:"end"},fab:{position:"fixed",bottom:40,right:20},popper:{marginRight:"1rem"},recommendations:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{flexWrap:"nowrap",transform:"translateZ(0)"},gridListTitle:{color:e.palette.secondary.contrastText},titleBar:{background:"linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 70%, rgba(0,0,0,0) 100%)"}}})),Ma=function(e){var t=Array(11).fill(0),a=["for men","for women","for children","for friends","for elder","for relationship","foods","tools","luxuries","entertainment","working"].indexOf(e);return a>=0&&(t[a]=1),t};var Ga=function(e){var t=Fa(),a=Object(d.g)(),c=Object(n.useState)(0),i=Object(o.a)(c,2),j=i[0],u=i[1],m=Object(n.useState)([]),b=Object(o.a)(m,2),p=b[0],x=b[1],O=Object(n.useState)([]),g=Object(o.a)(O,2),f=g[0],y=g[1],w=Object(n.useState)(!0),C=Object(o.a)(w,2),N=C[0],k=C[1],_=Object(n.useState)(0),S=Object(o.a)(_,2),T=S[0],I=S[1],A=Object(n.useState)(!1),P=Object(o.a)(A,2),D=P[0],R=P[1],B=Object(n.useState)({severity:"",message:""}),W=Object(o.a)(B,2),L=W[0],H=W[1],F=Object(n.useState)({page:1,keyword:"",category:""}),M=Object(o.a)(F,2),G=M[0],U=M[1],V=r.a.useContext(v).user,Y=Object(n.useState)(!1),$=Object(o.a)(Y,2),J=$[0],Z=$[1],K=Object(n.useState)(!1),Q=Object(o.a)(K,2),X=Q[0],ee=Q[1],te=function(){Z(!0)},ae=function(){Z(!1)},ne=function(){ee(!0)},re=function(){ee(!1)},ce=function(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e})),t.current}(G.keyword);r.a.useEffect((function(){h.a.post("/product/search",{token:V||"",page:G.page,keyword:G.keyword,category:Ma(G.category),price_range:[]}).then((function(e){var t=e.data;460===t.code&&a.push("/404");var n=t.flag;k(!!n),u(t.total_pages),x(t.product_lst),y(t.recommendation_list),ce!==G.keyword&&U(Object(s.a)(Object(s.a)({},G),{},{category:"",page:1}))}))}),[G]);var ie=N?null==G.keyword||""===G.keyword?Object(q.jsx)("h3",{style:{textTransform:"capitalize"},children:G.category}):Object(q.jsxs)("h3",{children:['Search result of "',G.keyword,'"']}):Object(q.jsxs)("h3",{children:['Sorry, no result of "',G.keyword,'". Take a look at our other products instead']}),se=Object(n.useState)(1),oe=Object(o.a)(se,2),le=oe[0],de=oe[1];return Object(q.jsxs)("div",{className:t.root,children:[Object(q.jsx)(na,{className:t.navBar,setKeyword:function(e){U(Object(s.a)(Object(s.a)({},G),{},{keyword:e}))},reload:T}),Object(q.jsx)(E.a,{className:t.main,children:Object(q.jsxs)(z.a,{container:!0,spacing:0,children:[Object(q.jsx)(z.a,{className:t.leftContainer,container:!0,item:!0,xs:12,sm:2,children:Object(q.jsx)(z.a,{item:!0,xs:12,children:Object(q.jsx)(ka,{handleCategory:function(e){U({keyword:"",category:e,page:1})}})})}),Object(q.jsxs)(z.a,{className:t.rightContainer,container:!0,item:!0,xs:12,sm:10,spacing:3,children:[f.length>0&&Object(q.jsxs)(z.a,{className:t.recommendations,container:!0,item:!0,xs:12,spacing:2,style:{},children:[Object(q.jsx)(z.a,{item:!0,xs:12,children:Object(q.jsxs)("h4",{children:[Object(q.jsx)(qa.a,{}),"Recommendations for you:"]})}),Object(q.jsx)(z.a,{item:!0,xs:12,children:Object(q.jsx)(Ba.a,{className:t.gridList,cols:4.5,children:f.map((function(e){return Object(q.jsxs)(Wa.a,{style:{height:"10rem"},component:l.b,to:"/product/".concat(e.product_id),children:[Object(q.jsx)("img",{src:e.pic_link,alt:"product-".concat(e.product_id),style:{height:"10rem"}}),Object(q.jsx)(La.a,{title:e.name,classes:{root:t.titleBar,title:t.gridListTitle}})]},"rec-".concat(e.product_id))}))})})]}),Object(q.jsxs)(z.a,{className:t.productsGrid,container:!0,item:!0,xs:12,spacing:2,children:[Object(q.jsx)(z.a,{item:!0,xs:12,children:ie}),p.map((function(e){return Object(q.jsx)(z.a,{item:!0,xs:12,sm:4,children:Object(q.jsx)(ma,{id:e.product_id,name:e.name,price:e.price,rating:e.rating,img:e.pic_link,handlePsModalOpen:te,handlePsModalClose:ae,handleNlModalOpen:ne,handleNlModalClose:re,setModalType:de,setNavbarReload:I,setAlertOpen:R,setAlertInfo:H},"product-".concat(e.product_id))},"product-".concat(e.product_id))}))]}),Object(q.jsxs)(z.a,{className:t.pagination,item:!0,xs:12,children:[Object(q.jsx)(_a.a,{count:j,color:"secondary",variant:"outlined",shape:"rounded",size:"large",page:G.page,onChange:function(e,t){U(Object(s.a)(Object(s.a)({},G),{},{page:t}))}}),Object(q.jsxs)("p",{children:["page ",G.page," of ",j]})]})]})]})}),Object(q.jsx)(Pa,{handleClose:ae,open:J,token:V,type:le}),Object(q.jsx)(Ea,{handleClose:re,open:X,token:V}),Object(q.jsx)(Ra,{}),D&&Object(q.jsx)(je,{severity:L.severity,message:L.message,open:D,setOpen:R})]})},za=a(338);var Ua=function(e){return Object(q.jsxs)(za.a,{color:"secondary",variant:"contained",disableElevation:!0,style:{width:"100%"},children:[Object(q.jsx)(X.a,{onClick:e.handleDecrement,children:"-"}),Object(q.jsx)(X.a,{color:"primary",children:e.amount}),Object(q.jsx)(X.a,{onClick:e.handleIncrement,children:"+"})]})},Va=Object(y.a)((function(e){return{root:{display:"flex",flexDirection:"Column",alignItems:"center"},grid:{width:"80%"},image:{width:"20rem",height:"20rem"},imageContainer:{display:"flex",justifyContent:"flex-end"},details:{display:"flex",flexDirection:"column"}}}));function Ya(e){var t=Va(),a=(Object(w.a)(),r.a.useContext(v).user),c=e.id,i=r.a.useState({id:e.id,name:"",price:100,description:"",delivery:"",rating:"",img:""}),s=Object(o.a)(i,2),l=s[0],d=s[1],j=r.a.useState(1),u=Object(o.a)(j,2),m=u[0],b=u[1],p=Object(n.useState)(!1),x=Object(o.a)(p,2),O=x[0],g=x[1],f=Object(n.useState)({severity:"",message:""}),y=Object(o.a)(f,2),C=y[0],N=y[1];r.a.useEffect((function(){h.a.get("/product/get_info",{params:{id:c}}).then((function(e){var t=e.data;d({name:t.name,price:t.price,description:t.description,delivery:t.delivery,rating:t.rating,img:t.pic_link})})).catch((function(e){}))}),[c]);var k=Object(n.useState)(!1),_=Object(o.a)(k,2),S=_[0],I=_[1],A=Object(n.useState)(!1),P=Object(o.a)(A,2),D=P[0],E=P[1],R=Object(n.useState)(1),B=Object(o.a)(R,2),W=B[0],L=B[1],H=function(){I(!0)},F=function(){E(!0)};return Object(q.jsxs)("div",{className:t.root,children:[Object(q.jsxs)(z.a,{container:!0,className:t.grid,spacing:5,direction:"row",justify:"flex-end",children:[Object(q.jsx)(z.a,{className:t.imageContainer,item:!0,sm:5,xs:12,children:Object(q.jsx)("img",{className:t.image,src:l.img,alt:"product"})}),Object(q.jsxs)(z.a,{container:!0,item:!0,sm:7,xs:12,spacing:2,children:[Object(q.jsx)(z.a,{item:!0,xs:12,children:Object(q.jsx)(T.a,{variant:"h4",children:l.name})}),Object(q.jsx)(z.a,{item:!0,xs:12,children:Object(q.jsx)(St.a,{name:"product-rating",value:l.rating,precision:.5,readOnly:!0})}),Object(q.jsx)(z.a,{item:!0,xs:12,children:Object(q.jsxs)(T.a,{variant:"h4",children:["$",l.price]})}),Object(q.jsx)(z.a,{item:!0,xs:12,children:Object(q.jsx)(T.a,{variant:"body1",children:l.description})}),Object(q.jsx)(z.a,{container:!0,item:!0,xs:12,children:Object(q.jsx)(z.a,{item:!0,xs:2,children:Object(q.jsx)(Ua,{amount:m,handleIncrement:function(){b(m+1)},handleDecrement:function(){b(m-1>=1?m-1:1)}})})}),Object(q.jsx)(z.a,{container:!0,item:!0,xs:12,children:Object(q.jsxs)(z.a,{item:!0,xs:3,children:["Total: $",m*l.price]})}),Object(q.jsxs)(z.a,{container:!0,item:!0,xs:12,alignItems:"center",spacing:1,children:[Object(q.jsx)(z.a,{item:!0,xs:6,sm:3,children:Object(q.jsx)(X.a,{variant:"contained",color:"primary",onClick:function(){if(a){var e={token:a,list:[[c,m]]};h()({url:"/order/new",method:"post",data:e}).then((function(e){e.data.code===Se?(N(ue),g(!0)):(L(1),H())})).catch((function(e){console.log(e)}))}else F()},style:{width:"100%"},children:"Purchase"})}),Object(q.jsx)(z.a,{item:!0,xs:6,sm:3,children:Object(q.jsx)(X.a,{variant:"outlined",color:"secondary",onClick:function(){a?h.a.post("/user/cart/add",{token:a,product_id:c,amount:m}).then((function(t){e.setNavbarReload(),L(2),H()})).catch((function(e){})):F()},style:{width:"100%"},children:"Add to Cart"})})]})]})]}),Object(q.jsx)(Pa,{handleClose:function(){I(!1)},open:S,token:a,type:W}),Object(q.jsx)(Ea,{handleClose:function(){E(!1)},open:D,token:a}),O&&Object(q.jsx)(je,{severity:C.severity,message:C.message,open:O,setOpen:g})]})}function $a(e){var t=e.match.params.id,a=Object(n.useState)(0),r=Object(o.a)(a,2),c=r[0],i=r[1];return Object(q.jsxs)("div",{children:[Object(q.jsx)(na,{reload:c}),Object(q.jsx)(Ya,{id:t,setNavbarReload:function(){return i((function(e){return e+1}))}})]})}var Ja=a(185),Za=a.n(Ja),Ka=a(184),Qa=a.n(Ka),Xa=Object(y.a)((function(e){return{root:{borderRadius:5,overflow:"hidden",width:"100%"},grid:{},img:{height:"10rem",maxWidth:"100%",padding:10}}}));var en=function(e){var t=Xa(),a=Object(w.a)(),c=r.a.useContext(v).user,i=e.item,s=Object(n.useState)(i.product_id),l=Object(o.a)(s,2),d=l[0],j=(l[1],Object(n.useState)(i.pic_link)),u=Object(o.a)(j,2),m=u[0],b=(u[1],Object(n.useState)(i.product_name)),p=Object(o.a)(b,2),x=p[0],O=(p[1],Object(n.useState)(i.amount)),g=Object(o.a)(O,2),f=g[0],y=g[1];return Object(q.jsx)("div",{className:t.root,style:{border:"1px solid ".concat(a.palette.primary.contrastText)},children:Object(q.jsxs)(z.a,{className:t.grid,container:!0,spacing:2,alignItems:"center",children:[Object(q.jsx)(z.a,{item:!0,xs:3,children:Object(q.jsx)("img",{className:t.img,src:m,alt:""})}),Object(q.jsx)(z.a,{item:!0,xs:3,children:x}),Object(q.jsxs)(z.a,{item:!0,xs:2,children:[Object(q.jsxs)("p",{children:["Quantity: ",f]}),Object(q.jsx)("p",{children:"Item price: $".concat(i.price)}),Object(q.jsx)("p",{children:"Total price: $".concat(i.cost)})]}),Object(q.jsx)(z.a,{container:!0,item:!0,xs:4,justify:"flex-end",children:Object(q.jsx)(z.a,{item:!0,xs:12,children:Object(q.jsxs)(za.a,{children:[Object(q.jsx)(He.a,{color:"secondary",onClick:function(){y(f-1<=0?0:f-1),h.a.post("/user/cart/change",{token:c,product_id:d,amount:f-1}).then((function(t){e.setReload((function(e){return e+1}))})).catch((function(e){}))},children:Object(q.jsx)(Qa.a,{})}),Object(q.jsx)(He.a,{color:"secondary",onClick:function(){y(f+1),h.a.post("/user/cart/change",{token:c,product_id:d,amount:f+1}).then((function(t){e.setReload((function(e){return e+1}))})).catch((function(e){}))},children:Object(q.jsx)(Za.a,{})}),Object(q.jsx)(X.a,{variant:"contained",color:"primary",onClick:function(){var t={token:c,list:[[d,f]]};h()({url:"/order/new",method:"post",data:t}).then((function(t){t.data.code===Se?(e.setAlertInfo(ue),e.setAlertOpen(!0)):(e.setAlertInfo(he),e.setAlertOpen(!0),e.setReload((function(e){return e+1})))})).catch((function(e){console.log(e)}))},children:"Buy"})]})})}),Object(q.jsx)("div",{})]})})},tn=Object(y.a)((function(e){return{title:{},checkoutBtn:{width:"100%"}}}));var an=function(e){var t=tn(),a=Object(w.a)(),c=r.a.useContext(v).user,i=Object(d.g)(),s=Object(n.useState)(0),l=Object(o.a)(s,2),j=(l[0],l[1],Object(n.useState)(0)),u=Object(o.a)(j,2),m=u[0],b=u[1],p=Object(n.useState)([]),x=Object(o.a)(p,2),O=x[0],g=x[1],f=Object(n.useState)(0),y=Object(o.a)(f,2),C=y[0],N=y[1],k=Object(n.useState)(!1),_=Object(o.a)(k,2),S=_[0],I=_[1],A=Object(n.useState)({severity:"",message:""}),P=Object(o.a)(A,2),D=P[0],R=P[1];return Object(n.useEffect)((function(){h.a.get("/user/cart/list",{params:{token:c}}).then((function(e){var t=e.data;console.log(t),g(t)})).catch((function(e){})),h.a.get("/user/cart/cost",{params:{token:c}}).then((function(e){var t=e.data.cost;b(t)})).catch((function(e){}))}),[c,C]),Object(q.jsxs)("div",{children:[Object(q.jsx)(na,{reload:C}),Object(q.jsx)(E.a,{ml:a.spacing(1),mr:a.spacing(1),children:Object(q.jsxs)(z.a,{container:!0,spacing:2,children:[Object(q.jsx)(z.a,{item:!0,xs:12,children:Object(q.jsx)(T.a,{variant:"h3",align:"center",children:"My Cart"})}),Object(q.jsxs)(z.a,{container:!0,item:!0,xs:12,spacing:2,children:[Object(q.jsx)(z.a,{container:!0,item:!0,xs:9,spacing:2,children:O.map((function(e){return Object(q.jsx)(z.a,{item:!0,xs:12,children:Object(q.jsx)(en,{item:e,history:i,setAlertOpen:I,setAlertInfo:R,setReload:N})},"".concat(e.product_id,"-").concat(e.product_name,"-").concat(e.amount))}))}),Object(q.jsx)(z.a,{item:!0,xs:3,children:Object(q.jsxs)(E.a,{p:2,border:1,borderColor:a.palette.primary.contrastText,borderRadius:5,children:[Object(q.jsx)(T.a,{variant:"h5",children:"Total Products in Cart"}),O.length,Object(q.jsx)(T.a,{variant:"h5",children:"Total Payment"}),Object(q.jsx)("b",{children:"$".concat(m)}),Object(q.jsx)(X.a,{className:t.checkoutBtn,variant:"contained",color:"secondary",style:{marginTop:"2rem"},onClick:function(){if(0===O.length)return R(me),void I(!0);var e=O.map((function(e){return[e.product_id,e.amount]})),t={token:c,list:e};h()({url:"/order/new",method:"post",data:t}).then((function(e){e.data.code===Se?(R(ue),I(!0)):(R(he),I(!0),N((function(e){return e+1})))})).catch((function(e){console.log(e)}))},children:"CHECKOUT"})]})})]})]})}),S&&Object(q.jsx)(je,{severity:D.severity,message:D.message,open:S,setOpen:I})]})},nn=a(339);function rn(){return Object(q.jsxs)(T.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(q.jsx)(nn.a,{color:"inherit",href:"/",children:"V-Gift"})," ",(new Date).getFullYear(),"."]})}var cn=Object(y.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(/img/home/home-4.jpeg)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},adminButton:{position:"fixed",bottom:10,right:10}}}));var sn=function(e){var t=e.setAdminAuth,a=Object(Ke.a)(e,["setAdminAuth"]),n=r.a.useState({name:"",password:"",showPassword:!1}),c=Object(o.a)(n,2),i=c[0],l=c[1],d=function(e){return function(t){l(Object(s.a)(Object(s.a)({},i),{},Object(te.a)({},e,t.target.value)))}},j=r.a.useState({nameError:!1,passwordError:!1,help_text:""}),u=Object(o.a)(j,2),m=u[0],b=u[1],p=function(){return function(e){b({nameError:!1,passwordError:!1,help_text:""})}},x=cn();return Object(q.jsxs)(z.a,{container:!0,component:"main",className:x.root,children:[Object(q.jsx)(S.a,{}),Object(q.jsx)(z.a,{item:!0,xs:!1,sm:4,md:7,className:x.image}),Object(q.jsx)(z.a,{item:!0,xs:12,sm:8,md:5,component:Qe.a,elevation:6,square:!0,children:Object(q.jsxs)("div",{className:x.paper,children:[Object(q.jsx)(D.a,{className:x.avatar,children:Object(q.jsx)($.a,{})}),Object(q.jsx)(T.a,{component:"h1",variant:"h5",children:"V-Gifts Admin Sign in"}),Object(q.jsxs)("form",{className:x.form,noValidate:!0,onSubmit:function(e){e.preventDefault(),i.name&&i.password?h.a.post("admin/login",{name:i.name,password:i.password}).then((function(e){var n=e.data;464===n.code?b({nameError:!0,help_text:"The entered admin name does not exist"}):465===n.code?b({passwordError:!0,help_text:"The password entered is incorrect"}):(console.log(n),t(n.token,n.admin_id),a.history.push("/admin/".concat(n.token)))})).catch((function(e){})):b({nameError:!0,passwordError:!0,help_text:"All fields have to be finished before logging you in"})},children:[Object(q.jsx)(ae.a,{error:m.nameError,helperText:m.help_text,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Admin Account Name",autoFocus:!0,onChange:d("name"),onClick:p()}),Object(q.jsx)(qe.a,{type:i.showPassword?"text":"password",value:i.password,error:m.passwordError,helperText:m.help_text,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Admin Password",id:"password",autoComplete:"current-password",onChange:d("password"),onClick:p(),endAdornment:Object(q.jsx)(Le.a,{position:"end",children:Object(q.jsx)(He.a,{"aria-label":"toggle password visibility",onClick:function(){l(Object(s.a)(Object(s.a)({},i),{},{showPassword:!i.showPassword}))},onMouseDown:function(e){e.preventDefault()},edge:"end",children:i.showPassword?Object(q.jsx)(Re.a,{}):Object(q.jsx)(We.a,{})})})}),Object(q.jsx)(X.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:x.submit,children:"Sign In"}),Object(q.jsx)(E.a,{mt:5,children:Object(q.jsx)(rn,{})})]})]})})]})};function on(e){return Object(q.jsxs)("div",{children:[Object(q.jsx)(na,{}),Object(q.jsx)("h1",{children:"404 NOT FOUND"})]})}function ln(e){var t=r.a.useContext(v).user;return console.log(t),t?Object(q.jsx)(d.b,Object(s.a)({},e)):Object(q.jsx)(d.a,{to:"/login"})}function dn(e){var t=r.a.useContext(v).admin;return console.log(t),t?Object(q.jsx)(d.b,Object(s.a)({},e)):Object(q.jsx)(d.a,{to:"/admin/login"})}var jn=Object(j.a)({palette:{primary:{light:"#fff64f",main:"#ffc400",dark:"#c79400",contrastText:"#000000"},secondary:{light:"#6ec6ff",main:"#2196f3",dark:"#0069c0",contrastText:"#fafafa"}}});var un=function(){var e=r.a.useState(localStorage.getItem("token")),t=Object(o.a)(e,2),a=t[0],n=t[1],c=r.a.useState(localStorage.getItem("admin_token")),i=Object(o.a)(c,2),j=i[0],m=i[1],h=function(e,t){localStorage.setItem("token",e),localStorage.setItem("id",t),n(e)},b=function(e,t){localStorage.setItem("admin_token",e),localStorage.setItem("admin_id",t),m(e)};return Object(q.jsx)(u.a,{theme:jn,children:Object(q.jsx)(f,{value:{user:a,admin:j},children:Object(q.jsx)(l.a,{children:Object(q.jsxs)(d.d,{children:[Object(q.jsx)(d.b,{exact:!0,path:"/",component:Ze}),Object(q.jsx)(d.b,{exact:!0,path:"/login",render:function(e){return Object(q.jsx)(lt,Object(s.a)(Object(s.a)({},e),{},{setAuth:h}))}}),Object(q.jsx)(d.b,{exact:!0,path:"/register",render:function(e){return Object(q.jsx)(oa,Object(s.a)(Object(s.a)({},e),{},{setAuth:h}))}}),Object(q.jsx)(d.b,{exact:!0,path:"/admin/login",render:function(e){return Object(q.jsx)(sn,Object(s.a)(Object(s.a)({},e),{},{setAdminAuth:b}))}}),Object(q.jsx)(d.b,{path:"/products",component:Ga}),Object(q.jsx)(d.b,{exact:!0,path:"/product/:id",component:$a}),Object(q.jsx)(ln,{exact:!0,path:"/profile/:id",component:Lt}),Object(q.jsx)(ln,{exact:!0,path:"/profile/:id/cart",component:an}),Object(q.jsx)(dn,{exact:!0,path:"/admin/:token",component:Ve}),Object(q.jsx)(d.b,{component:on})]})})})})},mn=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,351)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)}))},hn=(a(251),a(187)),bn=a(117);var pn=Object(bn.b)((function(){}));i.a.render(Object(q.jsx)(r.a.StrictMode,{children:Object(q.jsx)(hn.a,{store:pn,children:Object(q.jsx)(un,{})})}),document.getElementById("root")),mn()}},[[252,1,2]]]);
//# sourceMappingURL=main.d2afd13c.chunk.js.map